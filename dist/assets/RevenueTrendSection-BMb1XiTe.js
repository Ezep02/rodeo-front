const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RevenueByMonth-BhBeybDG.js","assets/index-GbvGXsA3.js","assets/index-_3wPmY0a.css","assets/card-C0xXg1Ic.js","assets/trending-up-BAQuBaio.js","assets/chart-Ds2mbzyQ.js"])))=>i.map(i=>d[i]);
import{A as h,r as n,j as e,d as u,L as l,_ as m}from"./index-GbvGXsA3.js";import{C as x,a as f,b as y,d as p,c as j}from"./card-C0xXg1Ic.js";import{C as g,c as v,B as C,a as b,X as R,d as N,e as w,b as _}from"./chart-Ds2mbzyQ.js";import{a as E}from"./index-CJIVQgvq.js";const M="http://localhost:9090/api/v1/analytics",L=async()=>(await h.get(`${M}/month-revenue`)).data.monthly_revenue,S=()=>{const[s,t]=n.useState([]);return n.useEffect(()=>{(async()=>{try{let a=await L();a&&t(a)}catch(a){console.warn("Algo no fue bien recuperando las ganancias mensuales",a)}})()},[]),{revenueByMonth:s}},U=({x:s,y:t,payload:o})=>e.jsx("text",{x:s,y:t+10,fill:"#fff",fontSize:12,textAnchor:"middle",children:o.value}),A=({month_client_rate:s})=>{const t=s.slice().sort((r,c)=>r.month.localeCompare(c.month)).map(r=>{const[c,d]=r.month.split("-").map(Number),i=new Date(c,d-1).toLocaleString("es-ES",{month:"short"});return{mes:i.charAt(0).toUpperCase()+i.slice(1),usuarios:r.new_clients}}),o=t.reduce((r,c)=>r+c.usuarios,0),a=Math.round(o/t.length||1);return e.jsxs(x,{className:"md:col-span-1 bg-gray-900/50 border-gray-800 hover:border-gray-700 transition-colors h-full",children:[e.jsx(f,{className:"pb-2",children:e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-rose-500/20 rounded-lg flex items-center justify-center",children:e.jsx(E,{className:"w-5 h-5 text-rose-500"})}),e.jsxs("div",{children:[e.jsx(y,{className:"text-xl font-bold text-white",children:"Nuevos Usuarios"}),e.jsxs(p,{children:["Promedio: ",a," usuarios/mes"]})]})]})})}),e.jsx(j,{className:"h-full",children:e.jsx(g,{config:{},className:"md:h-5/6 h-4/6 w-full",children:e.jsx(v,{width:"100%",height:"100%",children:e.jsxs(C,{data:t,children:[e.jsx(b,{vertical:!1,stroke:"#475569"}),e.jsx(R,{dataKey:"mes",tickLine:!1,axisLine:!1,tick:e.jsx(U,{})}),e.jsx(N,{cursor:!1,content:e.jsx(w,{hideLabel:!0,formatter:r=>[`${r} `,"usuarios"]})}),e.jsx(_,{dataKey:"usuarios",fill:"#f43f5e",radius:[4,4,0,0]})]})})})})]})},B="http://localhost:9090/api/v1/analytics",T=async()=>(await h.get(`${B}/client-rate`)).data.month_client_rate,k=()=>{const[s,t]=n.useState([]);return n.useEffect(()=>{(async()=>{try{let a=await T();a&&t(a)}catch(a){console.warn("Algo fue mal recuperando el rate de clientes",a)}})()},[]),{clientRate:s}},D=u.lazy(()=>m(()=>import("./RevenueByMonth-BhBeybDG.js"),__vite__mapDeps([0,1,2,3,4,5]))),K=()=>{const{revenueByMonth:s}=S(),{clientRate:t}=k();return e.jsxs("section",{className:"grid lg:grid-cols-2 gap-8 mb-8 grid-cols-1 lg:h-[60vh] h-screen",children:[e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"md:col-span-3 flex justify-center items-center mt-2 bg-gray-900/50 border-gray-800 hover:border-gray-700 transition-colors",children:e.jsx(l,{className:"w-6 h-6 animate-spin text-gray-400"})}),children:e.jsx(D,{revenueByMonth:s})}),e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"md:col-span-3 flex justify-center items-center mt-2 bg-gray-900/50 border-gray-800 hover:border-gray-700 transition-colors",children:e.jsx(l,{className:"w-6 h-6 animate-spin text-gray-400"})}),children:e.jsx(A,{month_client_rate:t})})]})};export{K as default};
