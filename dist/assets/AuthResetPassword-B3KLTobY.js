import{z as t,u as g,d as N,t as b,r as n,f as v,j as e,E as y,G as E,B as P,e as R}from"./index-AL-VPenz.js";const S=t.object({password:t.string().min(7,{message:"La contraseña debe contener al menos 7 caracteres"}).max(20,{message:"La contraseña debe contener menos de 20 caracteres"}),repeted_password:t.string().min(7,{message:"La contraseña debe contener al menos 7 caracteres"}).max(20,{message:"La contraseña debe contener menos de 20 caracteres"})}).refine(s=>s.password===s.repeted_password,{message:"Las contraseñas deben coincidir",path:["repeted_password"]}),_=()=>{var c,d;const{token:s}=g(),{register:l,handleSubmit:x,formState:{errors:r}}=N({resolver:b(S)}),[p,o]=n.useState(!1),[u,h,f]=n.useActionState(async(i,w)=>{var m;try{let a=await v(w.password,s==null?void 0:s.slice(6));return console.log(a),null}catch(a){return o(!0),((m=a==null?void 0:a.response)==null?void 0:m.data)||"Error de autenticación"}},null),j=i=>{n.startTransition(()=>{h(i)})};return e.jsx("div",{className:"min-h-svh grid",children:e.jsxs("div",{className:"flex flex-col gap-4 p-6 md:p-10",children:[e.jsx(y,{message:u,show:p,onClose:()=>o(!1)}),e.jsx("div",{className:"flex flex-1 items-center justify-center",children:e.jsx("div",{className:"w-full max-w-xs",children:f?e.jsxs("div",{className:"w-full flex justify-center items-center flex-col gap-1",children:[e.jsx("p",{className:"loader"}),e.jsx("span",{children:"Verificando informacion"})]}):e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:x(j),children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center w-full h-full text-rose-500",children:e.jsx(E,{size:60})}),e.jsx("h1",{className:"text-2xl font-bold mb-4 text-center",children:"El Rodeo"}),e.jsx("p",{className:"text-balance font-medium text-sm text-zinc-600 text-center",children:"Ingresa una nueva contraseña"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"email",className:" text-pretty font-medium text-sm",children:"Contraseña"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("input",{type:"password",placeholder:"Contraseña",...l("password",{required:!0}),autoFocus:!0,className:"p-2 rounded-md  border  placeholder-gray-400 text-sm"}),r&&e.jsx("span",{className:"text-rose-600 text-pretty text-sm",children:(c=r.password)==null?void 0:c.message})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"password",className:"text-pretty font-medium text-sm",children:"Confirmar contraseña"}),e.jsx("input",{type:"password",placeholder:"Repite la contraseña",...l("repeted_password",{required:!0}),autoFocus:!0,className:"p-2 rounded-md  border  placeholder-gray-400 text-sm"}),r&&e.jsx("span",{className:"text-rose-600 text-pretty text-sm",children:(d=r.repeted_password)==null?void 0:d.message})]})]}),e.jsx(P,{type:"submit",className:"w-full",children:"Restablecer contraseña"}),e.jsx("div",{className:"text-center text-sm",children:e.jsx(R,{to:"/auth/login",className:"underline underline-offset-4",children:"Volver al inicio de sesion"})})]})})})]})})};export{_ as default};
