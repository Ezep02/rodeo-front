import{x as j,r as m,y as g,j as e,i as w,L as N}from"./index-Dnxtm2pS.js";import{C as b}from"./ToastCustom-BX97pe63.js";import{B as v}from"./button-ujtkwOP2.js";import{z as t,u as y,t as P}from"./zod-iA6bVD2_.js";import"./circle-check-big-DeL1DauF.js";const R=t.object({password:t.string().min(7,{message:"La contraseña debe contener al menos 7 caracteres"}).max(20,{message:"La contraseña debe contener menos de 20 caracteres"}),repeted_password:t.string().min(7,{message:"La contraseña debe contener al menos 7 caracteres"}).max(20,{message:"La contraseña debe contener menos de 20 caracteres"})}).refine(s=>s.password===s.repeted_password,{message:"Las contraseñas deben coincidir",path:["repeted_password"]}),S=()=>{var l,c;const{token:s}=j(),{register:n,handleSubmit:x,formState:{errors:r}}=y({resolver:P(R)}),[o,p,u]=m.useActionState(async(d,f)=>{var i;try{let a=await g(f.password,s==null?void 0:s.slice(6));return console.log(a),null}catch(a){return((i=a==null?void 0:a.response)==null?void 0:i.data)||"Error de autenticación"}},null),h=d=>{m.startTransition(()=>{p(d)})};return e.jsx("div",{className:"min-h-svh grid",children:e.jsxs("div",{className:"flex flex-col gap-4 p-6 md:p-10",children:[o&&e.jsx(b,{message:o,type:"error",duration:3e3}),e.jsx("div",{className:"flex flex-1 items-center justify-center",children:e.jsx("div",{className:"w-full max-w-xs",children:u?e.jsxs("div",{className:"w-full flex justify-center items-center flex-col gap-1",children:[e.jsx("p",{className:"loader"}),e.jsx("span",{children:"Verificando informacion"})]}):e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:x(h),children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center w-full h-full text-rose-500",children:e.jsx(w,{size:60})}),e.jsx("h1",{className:"text-2xl font-bold mb-4 text-center",children:"El Rodeo"}),e.jsx("p",{className:"text-balance font-medium text-sm text-zinc-600 text-center",children:"Ingresa una nueva contraseña"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"email",className:" text-pretty font-medium text-sm",children:"Contraseña"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("input",{type:"password",placeholder:"Contraseña",...n("password",{required:!0}),autoFocus:!0,className:"p-2 rounded-md  border  placeholder-gray-400 text-sm"}),r&&e.jsx("span",{className:"text-rose-600 text-pretty text-sm",children:(l=r.password)==null?void 0:l.message})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{htmlFor:"password",className:"text-pretty font-medium text-sm",children:"Confirmar contraseña"}),e.jsx("input",{type:"password",placeholder:"Repite la contraseña",...n("repeted_password",{required:!0}),autoFocus:!0,className:"p-2 rounded-md  border  placeholder-gray-400 text-sm"}),r&&e.jsx("span",{className:"text-rose-600 text-pretty text-sm",children:(c=r.repeted_password)==null?void 0:c.message})]})]}),e.jsx(v,{type:"submit",className:"w-full",children:"Restablecer contraseña"}),e.jsx("div",{className:"text-center text-sm",children:e.jsx(N,{to:"/auth/login",className:"underline underline-offset-4",children:"Volver al inicio de sesion"})})]})})})]})})};export{S as default};
