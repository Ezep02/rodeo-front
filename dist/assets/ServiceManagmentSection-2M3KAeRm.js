import{c as U,T as K,A as z,r as o,Q as P,j as e,B as N,b as k,V as X,n as T,m as L}from"./index-GbvGXsA3.js";import{C as Y}from"./card-C0xXg1Ic.js";import{T as ee}from"./index-CJIVQgvq.js";import{D as A,a as F,b as R,c as $,d as _,e as I,f as q}from"./useSlots-DmDdpVxG.js";import{T as se,P as re}from"./PanelControlPage-oMCWWpfB.js";import{u as W}from"./index.esm-vt054Pq_.js";import{C as G}from"./circle-alert-Dqim3oF4.js";import"./x-BEhwGYvZ.js";import"./calendar-1-Cl_Qp_YC.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=U("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=U("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),E="http://localhost:9090/api/v1/products",M=async(s,r)=>{const a=await z.get(`${E}/`);return console.log(s,r),a.data},ie=async(s,r)=>(await z.put(`${E}/${r}`,s)).data,ne=async s=>(await K.post(`${E}/`,s)).data,oe=async s=>await z.delete(`${E}/${s}`),le=()=>{const{setProductList:s,productList:r,setServicesOffset:a,servicesOffset:i,setSelectedServiceToDelete:t,selectedServiceToDelete:n}=o.useContext(P),d=()=>{a(i+5)};return o.useEffect(()=>{r.length===0&&(async()=>{const m=await M(5,i);m.products.length>0&&(s(f=>{const g=m.products.filter(b=>!f.some(u=>u.id===b.id));return[...f,...g]}),d())})()},[]),{productList:r,SearchMoreBarberServices:async()=>{const p=await M(5,i);p.products.length>0&&(s(m=>{const f=p.products.filter(g=>!m.some(b=>b.id===g.id));return[...m,...f]}),d())},selectedServiceToDelete:n,HandleOpenDeleteServicePopUp:l=>{t(l)}}},ce=({Prod:s})=>{const{setProductList:r,productList:a}=o.useContext(P),[i,t]=o.useState(!1),n=()=>{t(p=>!p)},[d,c,x]=o.useActionState(async(p,m)=>{try{if(await oe(m)){let g=[...a].filter(b=>b.id!==m);r(g),n()}}catch{console.warn("Error eliminando servicio")}},null),l=p=>{o.startTransition(()=>{c(p)})};return e.jsxs(A,{open:i,onOpenChange:n,children:[e.jsx(F,{asChild:!0,children:e.jsx(N,{onClick:()=>n,variant:"ghost",size:"icon",className:"text-gray-400 hover:text-white hover:bg-gray-700",children:e.jsx(se,{className:"w-4 h-4"})})}),e.jsx(R,{className:"sm:max-w-[425px] max-w-[350px] rounded-md",children:x?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full flex justify-center items-center flex-col gap-1 p-5",children:[e.jsx("p",{className:"loader"}),e.jsx("span",{children:"Procesando eliminacion"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs($,{children:[e.jsx(_,{children:"Estas a un paso de eliminar el servicio"}),e.jsxs(I,{className:"text-left",children:["¿Estás seguro de que quieres eliminar"," ",e.jsx("span",{className:"font-bold text-rose-500",children:s.name})," de tu lista de servicios? Esta acción no se puede deshacer."]})]}),e.jsx(q,{children:e.jsxs("div",{className:"flex flex-col w-full gap-2",children:[e.jsxs(N,{onClick:()=>l(s.id),children:[e.jsx(ee,{}),"Eliminar"]}),e.jsx(N,{variant:"outline",onClick:n,children:"Cancelar"})]})})]})})]})};function H(s,r){if(typeof s=="function")return s(r);s!=null&&(s.current=r)}function de(...s){return r=>{let a=!1;const i=s.map(t=>{const n=H(t,r);return!a&&typeof n=="function"&&(a=!0),n});if(a)return()=>{for(let t=0;t<i.length;t++){const n=i[t];typeof n=="function"?n():H(s[t],null)}}}}function me(s){const r=ue(s),a=o.forwardRef((i,t)=>{const{children:n,...d}=i,c=o.Children.toArray(n),x=c.find(pe);if(x){const l=x.props.children,p=c.map(m=>m===x?o.Children.count(l)>1?o.Children.only(null):o.isValidElement(l)?l.props.children:null:m);return e.jsx(r,{...d,ref:t,children:o.isValidElement(l)?o.cloneElement(l,void 0,p):null})}return e.jsx(r,{...d,ref:t,children:n})});return a.displayName=`${s}.Slot`,a}function ue(s){const r=o.forwardRef((a,i)=>{const{children:t,...n}=a;if(o.isValidElement(t)){const d=fe(t),c=he(n,t.props);return t.type!==o.Fragment&&(c.ref=i?de(i,d):d),o.cloneElement(t,c)}return o.Children.count(t)>1?o.Children.only(null):null});return r.displayName=`${s}.SlotClone`,r}var xe=Symbol("radix.slottable");function pe(s){return o.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===xe}function he(s,r){const a={...r};for(const i in r){const t=s[i],n=r[i];/^on[A-Z]/.test(i)?t&&n?a[i]=(...c)=>{const x=n(...c);return t(...c),x}:t&&(a[i]=t):i==="style"?a[i]={...t,...n}:i==="className"&&(a[i]=[t,n].filter(Boolean).join(" "))}return{...s,...a}}function fe(s){var i,t;let r=(i=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:i.get,a=r&&"isReactWarning"in r&&r.isReactWarning;return a?s.ref:(r=(t=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a?s.props.ref:s.props.ref||s.ref)}var ge=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],be=ge.reduce((s,r)=>{const a=me(`Primitive.${r}`),i=o.forwardRef((t,n)=>{const{asChild:d,...c}=t,x=d?a:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(x,{...c,ref:n})});return i.displayName=`Primitive.${r}`,{...s,[r]:i}},{}),je="Label",Q=o.forwardRef((s,r)=>e.jsx(be.label,{...s,ref:r,onMouseDown:a=>{var t;a.target.closest("button, input, select, textarea")||((t=s.onMouseDown)==null||t.call(s,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));Q.displayName=je;var Z=Q;const ye=X("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),y=o.forwardRef(({className:s,...r},a)=>e.jsx(Z,{ref:a,className:k(ye(),s),...r}));y.displayName=Z.displayName;const S=o.forwardRef(({className:s,type:r,...a},i)=>e.jsx("input",{type:r,className:k("flex h-10 w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-base ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-zinc-950 placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:border-zinc-800 dark:bg-zinc-950 dark:ring-offset-zinc-950 dark:file:text-zinc-50 dark:placeholder:text-zinc-400 dark:focus-visible:ring-zinc-300",s),ref:i,...a}));S.displayName="Input";const V=o.forwardRef(({className:s,...r},a)=>e.jsx("textarea",{className:k("flex min-h-[80px] w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-base ring-offset-white placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:border-zinc-800 dark:bg-zinc-950 dark:ring-offset-zinc-950 dark:placeholder:text-zinc-400 dark:focus-visible:ring-zinc-300",s),ref:a,...r}));V.displayName="Textarea";const ve=({Prod:s})=>{const{setProductList:r}=o.useContext(P),[a,i]=o.useState(!1),t=()=>{i(h=>!h)},{register:n,handleSubmit:d,setValue:c,watch:x,formState:{errors:l}}=W({defaultValues:{name:s.name,description:s.description,price:s.price,category:s.category,preview_url:s.preview_url}}),p=x("category"),m=[{id:"cortes",name:"Cortes",color:"bg-blue-500"},{id:"barbas",name:"Barbas",color:"bg-green-500"},{id:"combos",name:"Combos",color:"bg-rose-500"}],[f,g,b]=o.useActionState(async(h,D)=>{var j,C;try{const v={...D,id:s.id},O=await ie(v,s.id);return O.product&&(r(J=>J.map(B=>B.id===O.product.id?O.product:B)),t()),null}catch(v){return console.warn(v),((C=(j=v==null?void 0:v.response)==null?void 0:j.data)==null?void 0:C.error)||"Ocurrió un error actualizando el producto"}},null),u=h=>{o.startTransition(()=>{g(h)})},w="bg-white border border-gray-300 text-gray-900 placeholder:text-gray-400 focus:outline-none focus:border-gray-400 transition-colors";return e.jsxs(A,{open:a,onOpenChange:t,children:[e.jsx(F,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"icon",className:"text-gray-400 hover:text-black hover:bg-gray-200",children:e.jsx(ae,{className:"w-4 h-4"})})}),e.jsxs(R,{className:"lg:max-w-4xl max-w-full bg-gray-50 border border-gray-200 text-gray-900 overflow-y-auto",children:[e.jsx($,{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-rose-500/20 rounded-lg flex items-center justify-center",children:e.jsx(T,{className:"w-5 h-5 text-rose-500"})}),e.jsxs("div",{className:"text-start",children:[e.jsx(_,{children:"Editar servicio"}),e.jsx(I,{children:"Modifica los detalles del servicio existente"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:b?e.jsx("div",{className:"lg:col-span-3 sm:col-span-2",children:e.jsxs("div",{className:"w-full flex justify-center items-center flex-col gap-1 p-5",children:[e.jsx("p",{className:"loader"}),e.jsx("span",{children:"Procesando..."})]})}):e.jsxs("form",{onSubmit:d(u),className:"flex flex-col space-y-6 col-span-full lg:col-span-1",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"name",children:"Nombre *"}),e.jsx(S,{id:"name",...n("name",{required:!0}),placeholder:"Nombre del servicio",className:w}),l.name&&e.jsx("p",{className:"text-red-600 text-sm",children:"Este campo es obligatorio"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"font-medium",children:"Categoría *"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(h=>e.jsx(L,{variant:p===h.id?"default":"outline",className:`cursor-pointer transition-colors ${p===h.id?`${h.color} text-white`:"border-gray-400 text-gray-700 hover:bg-gray-100"}`,onClick:()=>c("category",h.id),children:h.name},h.id))}),l.category&&e.jsxs("div",{className:"flex items-center gap-1 text-red-500 text-sm",children:[e.jsx(G,{className:"w-3 h-3"}),e.jsx("span",{children:"Debes seleccionar una categoría"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"description",children:"Descripción *"}),e.jsx(V,{id:"description",...n("description",{required:!0}),placeholder:"Descripción del servicio",className:`${w} min-h-[100px]`}),l.description&&e.jsx("p",{className:"text-red-600 text-sm",children:"Este campo es obligatorio"})]}),e.jsx("div",{className:"grid sm:grid-cols-2 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"price",children:"Precio *"}),e.jsx(S,{id:"price",type:"number",step:"0.01",...n("price",{required:!0,valueAsNumber:!0}),className:w}),l.price&&e.jsx("p",{className:"text-red-600 text-sm",children:"Campo requerido"})]})}),e.jsx(q,{className:"pt-4",children:e.jsx(N,{type:"submit",className:"w-full bg-rose-500 hover:bg-rose-600 text-white",children:"Guardar Cambios"})})]})})]})]})},Ne=({product:s})=>e.jsx("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700 hover:border-rose-500/30 transition-colors",children:e.jsxs("div",{className:"flex sm:items-center justify-between sm:flex-row flex-col",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-medium text-white",children:s.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(L,{variant:"outline",className:"border-gray-400 text-green-400",children:["$",s.price]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ve,{Prod:s}),e.jsx(ce,{Prod:s})]})]})]})}),we=()=>{const{register:s,handleSubmit:r,setValue:a,watch:i,formState:{errors:t}}=W({defaultValues:{name:"",description:"",price:0,category:"cortes",preview_url:""}}),[n,d]=o.useState(!1),c=()=>d(u=>!u),{setProductList:x}=o.useContext(P),l=i("category"),[p,m,f]=o.useActionState(async(u,w)=>{var h,D;try{const j={...w},C=await ne(j);return C.product&&(x(v=>[...v,C.product]),c()),null}catch(j){return console.warn(j),((D=(h=j==null?void 0:j.response)==null?void 0:h.data)==null?void 0:D.error)||"Ocurrió un error creando el producto"}},null),g=u=>{o.startTransition(()=>{m(u)})},b=[{id:"cortes",name:"Cortes",color:"bg-blue-500"},{id:"barbas",name:"Barbas",color:"bg-green-500"},{id:"combos",name:"Combos",color:"bg-rose-500"}];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-rose-500/20 rounded-lg flex items-center justify-center",children:e.jsx(T,{className:"w-5 h-5 text-rose-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm sm:text-2xl font-bold text-white",children:"Gestión de Servicios"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Administra tus servicios y horarios"})]})]}),e.jsxs(A,{open:n,onOpenChange:c,children:[e.jsx(F,{asChild:!0,children:e.jsxs(N,{className:"flex gap-2 bg-gray-800 hover:bg-gray-700 text-white",children:[e.jsx(re,{className:"w-4 h-4"}),"Agregar"]})}),e.jsxs(R,{className:"lg:max-w-3xl h-full sm:h-auto w-full sm:rounded-xl bg-white border border-gray-200 text-gray-900 p-6 shadow-xl",children:[e.jsx($,{className:"mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-rose-100 rounded-lg flex items-center justify-center",children:e.jsx(T,{className:"w-5 h-5 text-rose-500"})}),e.jsxs("div",{children:[e.jsx(_,{className:"text-xl font-semibold",children:"Nuevo servicio"}),e.jsx(I,{className:"text-gray-500",children:"Completa los detalles del servicio"})]})]})}),f?e.jsxs("div",{className:"flex flex-col items-center gap-2 py-10",children:[e.jsx("p",{className:"loader"}),e.jsx("span",{className:"text-gray-500",children:"Guardando servicio..."})]}):e.jsxs("form",{onSubmit:r(g),className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"name",children:"Nombre *"}),e.jsx(S,{id:"name",...s("name",{required:!0}),placeholder:"Ej. Corte clásico",className:"mt-1 bg-white border border-gray-300 text-gray-900 placeholder:text-gray-400 focus:outline-none"}),t.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Campo obligatorio"})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"description",children:"Descripción *"}),e.jsx(V,{id:"description",...s("description",{required:!0}),placeholder:"Describe el servicio...",className:"mt-1 bg-white border border-gray-300 text-gray-900 placeholder:text-gray-400 min-h-[100px] focus:outline-none"}),t.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Campo obligatorio"})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"price",children:"Precio *"}),e.jsx(S,{id:"price",type:"number",step:"0.01",...s("price",{required:!0,valueAsNumber:!0}),className:"mt-1 bg-white border border-gray-300 text-gray-900 placeholder:text-gray-400 focus:outline-none"}),t.price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Campo obligatorio"})]}),e.jsxs("div",{children:[e.jsx(y,{children:"Categoría *"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:b.map(u=>e.jsx(L,{variant:l===u.id?"default":"outline",className:`cursor-pointer px-3 py-1 rounded-full text-sm transition
                                                    ${l===u.id?`${u.color} text-white`:"border border-gray-300 text-gray-600 hover:bg-gray-100"}
                                                `,onClick:()=>a("category",u.id),children:u.name},u.id))}),t.category&&e.jsxs("div",{className:"flex items-center gap-1 text-red-500 text-sm mt-1",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:"Selecciona una categoría"})]})]}),e.jsx(q,{className:"pt-4",children:e.jsx(N,{type:"submit",className:"w-full bg-rose-500 hover:bg-rose-600 text-white font-semibold tracking-wide",children:"Agregar Servicio"})})]})]})]})]})})},Le=()=>{const{productList:s}=le(),[r,a]=o.useState(""),i=s.filter(t=>{var n;return(n=t.name)==null?void 0:n.toLowerCase().includes(r.toLowerCase())});return e.jsx(Y,{className:"bg-gray-900/50 border-gray-800",children:e.jsxs("div",{className:"p-6",children:[e.jsx(we,{}),e.jsx("div",{className:"flex gap-3 mb-6",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(te,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"search",className:"w-full flex border  border-zinc-300 text-sm font-medium focus:ring-1 pl-8 p-2 rounded-md outline-none ring-zinc-400 ",placeholder:"Buscar servicio...",value:r,onChange:t=>a(t.target.value)})]})}),e.jsxs("div",{className:"text-sm text-gray-400 mb-4",children:["Servicios actualmente activos: ",s.length]}),e.jsx("div",{className:"space-y-4",children:i==null?void 0:i.map((t,n)=>e.jsx(Ne,{product:t},n))})]})})};export{Le as default};
