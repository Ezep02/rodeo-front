import{r as d,al as W,j as a,g as p,B as x,$ as v}from"./index-AL-VPenz.js";import{C}from"./useSlots-Bc6p4izx.js";const $=()=>{const{setUser:o,user:c}=d.useContext(W);return{user:c,setUser:o}},z=({selectedDate:o,setSelectedDate:c,moveApptOffset:i,description:D,title:w})=>{const r=new Date,S=e=>{const t=e.getDay(),s=e.getDate()-t;return new Date(e.getFullYear(),e.getMonth(),s)},[n,u]=d.useState(S(r)),k=["Do","Lu","Ma","Mi","Ju","Vi","Sa"],m=[];for(let e=0;e<7;e++){const t=new Date(n.getFullYear(),n.getMonth(),n.getDate()+e),s=o&&t.toDateString()===o.toDateString(),g=t.toDateString()===r.toDateString(),l=new Date(r.getFullYear(),r.getMonth(),r.getDate()),h=t<l;m.push(a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:k[t.getDay()]}),a.jsx("button",{onClick:()=>!h&&c(t),disabled:h,className:p("w-8 h-8 rounded-md text-sm font-medium transition-all",s?"bg-zinc-900 text-white":"bg-slate-50 text-slate-600 hover:bg-slate-100",g&&!s&&"bg-gradient-to-br from-slate-800 to-slate-900 text-white shadow-lg",h&&"text-slate-400 hover:bg-transparent"),children:t.getDate()},e)]},e))}const y=()=>{const e=new Date(n.getFullYear(),n.getMonth(),n.getDate()-7),t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+6),s=new Date(r.getFullYear(),r.getMonth(),r.getDate());t<s||u(e)},[b,j]=d.useState(new Map);function N(e){const t=new Date(e);return t.setDate(e.getDate()-e.getDay()),`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}function f(e){const t=new Date(e);t.setDate(e.getDate()-e.getDay()),t.setHours(0,0,0,0);const s=new Date(t);return s.setDate(t.getDate()+6),s.setHours(23,59,59,999),{startOfWeek:t,endOfWeek:s}}const M=()=>{const e=new Date(n.getFullYear(),n.getMonth(),n.getDate()+7),t=N(e);if(u(e),!b.has(t)){const{endOfWeek:s}=f(e);i==null||i(new Date,s),j(g=>{const l=new Map(g);return l.set(t,"loaded"),l})}};return a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"mb-2",children:[a.jsxs("header",{className:"mb-4 w-full md:w-auto",children:[a.jsx("h2",{className:"font-semibold text-gray-800 text-lg mb-1",children:w}),a.jsx("p",{className:"text-gray-500 text-sm",children:D})]}),a.jsxs("nav",{className:"flex items-center gap-3","aria-label":"Navegaci√≥n semanal",children:[a.jsx(x,{variant:"ghost",size:"sm",onClick:y,className:"text-slate-600 hover:text-slate-800 p-1","aria-label":"Semana anterior",children:a.jsx(C,{className:"h-4 w-4"})}),a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Semana de"," ",n.toLocaleDateString("es-ES",{day:"numeric",month:"long"})]}),a.jsx(x,{variant:"ghost",size:"sm",onClick:M,className:"text-slate-600 hover:text-slate-800 p-1","aria-label":"Semana siguiente",children:a.jsx(v,{className:"h-4 w-4"})})]})]}),a.jsx("section",{className:"grid grid-cols-8 gap-4 mb-2",children:m})]})};export{z as S,$ as u};
