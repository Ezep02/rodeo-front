import{A as D,u as C,r,j as e,B as o,G as R,R as k,a as m,N as S}from"./index-DhWYa8W4.js";import{C as T,a as A,b as E,c as L}from"./card-Dsn8Ms4I.js";import{D as M}from"./download-D32Mfja9.js";import{A as O}from"./arrow-left-C2qEOzzy.js";const P="http://localhost:9090/api/v1/mercado_pago",B=async n=>(await D.get(`${P}/${n}`)).data.slot,H=()=>{const{token:n}=C(),[s,x]=r.useState(null),[u,d]=r.useState({days:0,hours:0,minutes:0,seconds:0}),[h,f,j]=r.useActionState(async(a,l)=>{var c;try{const t=await B(l.slice(6));return x(t),null}catch(t){return console.error(t),((c=t==null?void 0:t.response)==null?void 0:c.data)||"Error de autenticación"}},null);if(r.useEffect(()=>{n&&r.startTransition(()=>{f(n)})},[n]),r.useEffect(()=>{if(!s)return;const a=()=>{const c=new Date(s.date),[t,g]=s.time.split(":").map(Number);c.setHours(t,g,0,0);const N=new Date,i=c.getTime()-N.getTime();if(i>0){const y=Math.floor(i/864e5),w=Math.floor(i%(1e3*60*60*24)/(1e3*60*60)),v=Math.floor(i%(1e3*60*60)/(1e3*60)),b=Math.floor(i%(1e3*60)/1e3);d({days:y,hours:w,minutes:v,seconds:b})}else d({days:0,hours:0,minutes:0,seconds:0})};a();const l=setInterval(a,1e3);return()=>clearInterval(l)},[s]),j)return e.jsxs("div",{className:"h-screen flex items-center justify-center flex-col gap-2",children:[e.jsx("div",{className:"loader mb-2"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Recuperando datos..."})]});if(h||!s)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center px-4 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Sesión expirada o datos no disponibles"}),e.jsx(o,{className:"bg-black text-white hover:bg-gray-800",onClick:()=>window.location.href="/",children:"Volver al inicio"})]});const p=new Date(s.date).toLocaleDateString("es-AR",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:e.jsxs(T,{className:"w-full max-w-md mx-auto bg-white shadow-xl rounded-2xl",children:[e.jsxs(A,{className:"text-center pb-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 flex items-center justify-center",children:e.jsx(R,{size:30,className:"text-rose-500"})})}),e.jsx(E,{className:"text-xl font-bold text-gray-900",children:"¡Cita Confirmada!"}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Su cita ha sido reservada con éxito."})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-2",children:"Tiempo restante"}),e.jsx("div",{className:"bg-gray-900 rounded-xl p-6 text-white",children:e.jsx("div",{className:"grid grid-cols-4 gap-4 text-center",children:["days","hours","minutes","seconds"].map(a=>e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:String(u[a]).padStart(2,"0")}),e.jsx("div",{className:"text-xs text-gray-300 capitalize",children:a})]},a))})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Fecha de cita"}),e.jsx("span",{className:"font-medium",children:p})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Hora"}),e.jsx("span",{className:"font-medium",children:s.time})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(o,{className:"w-full bg-black hover:bg-gray-800 text-white",onClick:()=>window.print(),children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Descargar comprobante"]}),e.jsxs(o,{variant:"outline",className:"w-full",onClick:()=>window.location.href="/",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Volver al inicio"]})]})]})]})})},z=()=>e.jsxs(k,{children:[e.jsx(m,{path:"/success/:token",element:e.jsx(H,{})}),e.jsx(m,{path:"*",element:e.jsx(S,{to:"/",replace:!0})})]});export{z as default};
