import{c as C,r as n,j as e,F as U,H as S,I,J as A,U as P,K as D,M as F,B as x,X as k,L}from"./index-AL-VPenz.js";import{S as O}from"./SuccessAlert-CesVCbMF.js";import{C as B}from"./card-DXiLM1pq.js";import{a as R,U as j}from"./cloudinary-0XirjNsb.js";import{a as M}from"./index-DABRC3vZ.js";import{b as T}from"./index-CxlQJVOJ.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=C("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),q=({onClose:r,open:d})=>{const[i,o]=n.useState([]),[c,h]=n.useState([]),u=n.useRef(null),[N,g]=n.useState(!1),v=t=>{const a=Array.from(t.target.files||[]),l=a.map(s=>URL.createObjectURL(s));o(s=>[...s,...a]),h(s=>[...s,...l]),u.current&&(u.current.value="")},b=t=>{o(a=>a.filter((l,s)=>s!==t)),h(a=>a.filter((l,s)=>s!==t))},w=(t,a=30)=>{if(t.length<=a)return t;const l=t.lastIndexOf("."),s=l!==-1?t.slice(l):"";return`${t.slice(0,a-s.length-3)}...${s}`},p=new FormData,[E,z,f]=n.useActionState(async(t,a)=>{var l;try{for(let m=0;m<a.length;m++)p.append("file",a[m]);return await R(p)&&(h([]),g(!0)),null}catch(s){return console.log(s),((l=s==null?void 0:s.response)==null?void 0:l.data)||"Algo no fue bien subiendo imágenes"}},null),y=()=>{n.startTransition(()=>{z(i)})};return e.jsx(U,{open:d,onOpenChange:r,children:e.jsxs(S,{className:` \r
            2xl:max-h-[90vh] 2xl:min-h-[80vh] 2xl:max-w-5xl\r
            xl:max-h-[90vh] xl:min-h-[80vh] xl:max-w-4xl \r
            lg:max-h-[90vh] lg:min-h-[85vh] lg:max-w-3xl\r
            md:max-h-[95vh] md:min-h-[80vh] md:max-w-2xl  \r
            max-w-full max-h-full\r
            w-full h-full \r
            p-6 flex flex-col bg-zinc-50 z-50 md:rounded-3xl\r
            shadow-2xl slide-in-right overflow-hidden`,style:{animation:"slide-in 0.3s ease-out"},children:[e.jsx(I,{className:"mb-6 pt-4",children:e.jsxs("div",{className:"flex items-start flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{className:"p-2 rounded-full bg-stone-100 hover:bg-stone-200 transition",onClick:r,children:e.jsx(A,{size:18,className:"text-zinc-700"})}),e.jsx("h1",{className:"text-lg font-semibold text-zinc-700",children:"Subir imagen"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-zinc-900 rounded-xl text-white",children:e.jsx(P,{size:24})}),e.jsxs("div",{children:[e.jsx(D,{className:"text-lg text-start font-semibold text-zinc-700",children:"Carga tus mejores fotos"}),e.jsx(F,{className:"text-start",children:"Sube imágenes que puedas usar luego para tus publicaciones. Cortes, estilos o promociones: dale vida visual a tu barbería."})]})]})]})}),e.jsxs("main",{className:"flex-1 flex flex-col space-y-6 px-1 overflow-y-auto",children:[e.jsxs("section",{className:"space-y-1",children:[e.jsx("h2",{className:"text-zinc-800 font-medium",children:"Carga tus imágenes"}),e.jsx("p",{className:"text-sm text-zinc-500",children:"Las imágenes que subas estarán disponibles al momento de crear un post."})]}),e.jsx(O,{message:"¡Imagen subida exitosamente!",show:N,onClose:()=>g(!1)}),e.jsx(B,{className:"border-2 border-dashed border-zinc-300 hover:border-rose-300 transition bg-transparent",children:e.jsxs("div",{className:"p-8 relative text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-zinc-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(j,{className:"w-7 h-7 text-zinc-400"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-zinc-700 font-medium",children:"Arrastra y suelta tus imágenes aquí"}),e.jsx("p",{className:"text-sm text-zinc-500",children:"o haz clic para seleccionar archivos"}),e.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:"PNG, JPG, WEBP - máx. 10MB por archivo"})]}),e.jsx("input",{ref:u,type:"file",multiple:!0,accept:"image/*",onChange:v,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})}),c.length>0?e.jsxs("section",{className:"space-y-2 pt-4 max-h-[350px] lg:max-h-[450px] overflow-y-auto",children:[e.jsxs("h3",{className:"text-zinc-700 font-medium text-base",children:["Archivos seleccionados (",i.length,")"]}),e.jsx("ul",{className:"grid lg:grid-cols-2 grid-cols-1 gap-4",children:i.map((t,a)=>e.jsxs("li",{className:"flex items-center gap-4 p-3 bg-zinc-100 rounded-md",children:[e.jsx("img",{src:c[a],alt:t.name,className:"w-14 h-14 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-zinc-700 truncate",children:w(t.name,20)}),e.jsxs("p",{className:"text-xs text-zinc-500",children:[(t.size/1024).toFixed(1)," KB"]})]}),e.jsx(x,{size:"icon",type:"button",className:"text-zinc-500 hover:text-red-500 bg-transparent hover:bg-transparent",onClick:()=>b(a),children:e.jsx(k,{className:"w-4 h-4"})})]},a))})]}):e.jsxs("div",{className:"text-center text-sm text-zinc-400",children:[e.jsx("div",{className:"w-12 h-12 bg-zinc-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(_,{className:"w-6 h-6 text-zinc-400"})}),"Aún no has seleccionado archivos"]})]}),e.jsxs("footer",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(x,{variant:"ghost",onClick:r,className:"text-zinc-700 hover:text-zinc-900",children:"Cerrar"}),e.jsx(x,{onClick:y,disabled:c.length===0||f,className:"text-zinc-50 hover:text-zinc-200",children:f?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4 animate-spin"}),"Subiendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Subir ",c.length," imagen",c.length!==1?"es":""]})})]})]})})},X=()=>{const[r,d]=n.useState(!1),i=()=>{d(o=>!o)};return e.jsxs("section",{className:"w-full py-7",children:[e.jsxs("header",{className:"flex items-start gap-3 flex-wrap justify-between",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"p-2 bg-zinc-900 rounded-lg shadow-sm",children:e.jsx(M,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-gray-800 text-sm font-semibold",children:"Gestión de archivo"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Subí y organizá tus imágenes"})]})]}),e.jsx("div",{className:"",children:e.jsxs(x,{size:"sm",onClick:i,className:"bg-zinc-800 text-white hover:bg-zinc-700",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Subir Archivo"]})})]}),e.jsx(q,{open:r,onClose:i})]})};export{X as default};
