import{c as p,r,al as v,j as e,B as m}from"./index-AL-VPenz.js";import{G as f}from"./reviews_service-B1CMHQG9.js";import{B as u}from"./badge-DCrQblHJ.js";import{S as j}from"./star-gQmunR2o.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=p("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=p("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=p("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),k=()=>{const{user:a}=r.useContext(v),[n,i]=r.useState([]),[l,c]=r.useState(0),[o,d]=r.useState(!1),h=()=>{c(s=>s+1)};return r.useEffect(()=>{(async()=>{if(!(a!=null&&a.ID))return null;try{let t=await f(a.ID,l);t&&i(t.reviews)}catch{console.warn("Error obteniendo reviews")}})()},[]),{reviews:n,isLoading:o,MoveReviewOffset:h,setIsLoading:d}},y=3,C=()=>{const{reviews:a,isLoading:n}=k(),[i,l]=r.useState(y),c=()=>l(s=>s+y),o=s=>{console.log(`Editando reseña ${s}`)},d=s=>{confirm("¿Seguro que querés eliminar esta reseña?")&&console.log(`Eliminando reseña ${s}`)},h=a&&a.length>i;return n?e.jsx("p",{className:"text-gray-500 text-center pt-4",children:"Cargando reseñas..."}):e.jsx("div",{className:"space-y-6 pb-8 px-4 pt-3 md:px-6",children:Array.isArray(a)&&a.length>0?e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"grid gap-6",children:a.slice(0,i).map(s=>{var t;return e.jsx("li",{className:"bg-white p-6 rounded-xl border-b border-gray-100 hover:shadow-md transition-shadow duration-150",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[" ",e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"Rating:"}),Array.from({length:5},(x,g)=>e.jsx(j,{className:`w-4 h-4 ${g<s.review.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},g))]}),e.jsx("p",{className:"text-gray-700 text-sm mt-1",children:s.review.comment||"Sin comentario"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>o(s.review.id),title:"Editar reseña",className:"text-gray-500 hover:bg-gray-100",children:e.jsx(N,{className:"h-4 w-4"})}),e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>d(s.review.id),className:"text-red-600 hover:bg-red-100",title:"Eliminar reseña",children:e.jsx(b,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-2 pt-2 border-t border-gray-100",children:[((t=s.products)==null?void 0:t.length)>0&&e.jsxs("div",{className:"flex gap-1 flex-col",children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Servicios:"}),e.jsx("div",{className:"flex gap-1 flex-wrap",children:s.products.map(x=>e.jsx(u,{variant:"default",children:x.name},x.id))})]}),s.slot&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:new Date(s.slot.date).toLocaleDateString()})]})]})]})},s.review.id)})}),h&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(m,{onClick:c,variant:"outline",className:"px-8 py-2 rounded-lg border-gray-300 text-gray-700 bg-white hover:bg-gray-50",children:"Ver más"})})]}):e.jsx("div",{className:"text-center text-gray-500 py-6",children:e.jsx("p",{className:"text-base",children:"Aún no escribiste ninguna reseña."})})})};export{C as default};
