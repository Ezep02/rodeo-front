"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("./index-94416062.cjs");require("react");require("react-dom");const d=':host{display:block;width:inherit;--nylas-primary:#2563eb;--nylas-error:#cc4841;--nylas-error-pressed:#992222;--nylas-wraning:#f06c00;--nylas-success:#16a392;--nylas-info:#2b8fc2;--nylas-base-0:#ffffff;--nylas-base-25:#fcfcfd;--nylas-base-50:#f8f9fc;--nylas-base-100:#eaecf5;--nylas-base-200:#d5d9eb;--nylas-base-300:#b3b8d8;--nylas-base-400:#717bbc;--nylas-base-500:#4e5ba6;--nylas-base-600:#3e4784;--nylas-base-700:#263f72;--nylas-base-800:#293056;--nylas-base-900:#101323;--nylas-base-950:#0e101b;--nylas-border-radius:0.25rem;--nylas-border-radius-2x:0.5rem;--nylas-border-radius-3x:0.75rem;--nylas-font-family:"Inter", sans-serif}.dropdown{display:inline-block;width:100%;position:relative}.dropdown .dropdown-label{display:flex;align-items:center;gap:0.25rem;color:var(--nylas-base-800)}.dropdown .dropdown-label p{margin:0}.dropdown .dropdown-label span.required{color:var(--nylas-error);padding:0 0.25rem}.dropdown span.error{color:var(--nylas-error);font-size:14px}.dropbtn{width:inherit;height:48px;color:black;padding:0.5rem;font-size:16px;cursor:pointer;display:flex;gap:0.5rem;justify-content:space-between;align-items:center;background:transparent;border:1px solid var(--nylas-base-200);border-radius:var(--nylas-border-radius-2x)}.dropbtn.focus{background:transparent}.dropbtn.error{border:1px solid var(--nylas-error)}.dropbtn:hover,.dropbtn:active{border:1px solid var(--nylas-primary)}.dropbtn:active{outline:2px solid var(--nylas-primary)}.dropbtn span.open{transform:rotate(90deg)}.dropbtn span.closed{transform:rotate(270deg)}.dropdown-content{display:block;margin-top:0.5rem;background-color:var(--nylas-base-0);width:100%;max-height:336px;overflow:auto;z-index:1;border-radius:4px;position:absolute;top:72px;box-shadow:0px 4px 6px -2px rgba(0, 0, 0, 0.0509803922);box-shadow:0px 10px 15px -3px rgba(0, 0, 0, 0.1019607843)}.dropdown-content ul{padding:0;list-style-type:none;color:var(--nylas-base-900);max-height:336px}.dropdown-content ul li{padding:16px, 12px, 16px, 12px;color:black;padding:12px 16px;text-decoration:none;display:block;font-family:inherit;font-size:14px;font-weight:400;line-height:20px;letter-spacing:0px;text-align:left;cursor:pointer}.dropdown-content ul li:hover,.dropdown-content ul li:focus{background-color:var(--nylas-base-100)}.dropdown-content ul li label{display:flex;align-items:center;gap:0.5rem}.dropdown-content ul li label input{margin:0}.selected-options{display:flex;flex-wrap:wrap;gap:0.5rem;padding:0.5rem 0;margin-top:0.25rem;background:var(--nylas-base-0)}.selected-options .selected-option{display:flex;align-items:center;gap:0.5rem;padding:4px 8px;border-radius:var(--nylas-border-radius-2x);background:var(--nylas-base-100);color:var(--nylas-base-800);font-size:16px;font-weight:500;line-height:1.5rem;letter-spacing:0.5px}.selected-options .selected-option button{background:transparent;border:none;cursor:pointer;padding:0}.selected-options .selected-option button:hover{color:var(--nylas-primary)}',c=d,r=class{constructor(e){a.registerInstance(this,e),this.selectedOptionsChanged=a.createEvent(this,"selectedOptionsChanged",7),this.name=void 0,this.label=void 0,this.options=[],this.error="",this.required=!1,this.availableOptions=this.options,this.isOpen=!1,this.ariaActivedescendant="",this.shouldFocusFirstOption=!1}areOptionsEqual(e,s){if(e.length!==s.length)return!1;const t=[...e].sort((n,o)=>n.label.localeCompare(o.label)||n.value.localeCompare(o.value)),i=[...s].sort((n,o)=>n.label.localeCompare(o.label)||n.value.localeCompare(o.value));return t.every((n,o)=>{const l=i[o];return n.label===l.label&&n.value===l.value})}optionsChangedHandler(e){this.areOptionsEqual(e,this.availableOptions)||(this.availableOptions=e)}componentDidLoad(){a.debug("multi-select-dropdown","componentDidLoad"),this.options&&(this.availableOptions=this.options)}componentDidRender(){var e;a.debug("multi-select-dropdown","componentDidRender"),this.isOpen&&this.shouldFocusFirstOption&&(this.ariaActivedescendant=(e=this.availableOptions[0])==null?void 0:e.value,this.focusOption(0),this.shouldFocusFirstOption=!1)}handleOutsideClick(e){!e.composedPath().includes(this.el)&&this.isOpen&&(this.isOpen=!1)}handleBookingFormSubmitted(e){const s=this.availableOptions.filter(t=>t.selected).map(t=>t.value);this.required&&(!s||s.length<=0)&&(this.error="Please select at least one option"),this.error&&e.preventDefault()}selectOption(e){this.availableOptions=this.availableOptions.map(t=>(t.value===e.value&&(t.selected=!e.selected,t.selected&&(this.error="")),t));const s=this.availableOptions.filter(t=>t.selected).map(t=>t.value);this.selectedOptionsChanged.emit({value:s,name:this.name})}toggleDropdown(){this.isOpen=!this.isOpen,this.isOpen?this.shouldFocusFirstOption=!0:this.ariaActivedescendant=""}handleSelectButtonKeyDown(e){switch(e.key){case"ArrowDown":case"Enter":e.preventDefault(),this.isOpen||this.toggleDropdown();break;case"Escape":this.isOpen=!1;break}}handleListboxKeydown(e){const s=this.availableOptions,t=s.findIndex(i=>i.value===this.ariaActivedescendant);switch(e.key){case"ArrowDown":case"Tab":if(e.shiftKey){e.preventDefault();const n=t-1>=0?t-1:s.length-1;this.ariaActivedescendant=s[n].value,this.focusOption(n)}else{e.preventDefault();const n=t+1<s.length?t+1:0;this.ariaActivedescendant=s[n].value,this.focusOption(n)}break;case"ArrowUp":e.preventDefault();const i=t-1>=0?t-1:s.length-1;this.ariaActivedescendant=s[i].value,this.focusOption(i);break;case"Enter":e.preventDefault(),this.ariaActivedescendant&&this.selectOption(s[t]);break;case"Escape":this.isOpen=!1;break}}focusOption(e){var n;const s=this.availableOptions[e];if(!s)return;const t=s.value,i=(n=this.el.shadowRoot)==null?void 0:n.getElementById(t);i&&(i.focus(),i.scrollIntoView({behavior:"smooth",block:"nearest"}))}getSelectedOptions(){return this.availableOptions.filter(e=>e.selected)}renderOption(e){return a.h("li",{key:e.value,id:e.value,role:"option",tabindex:"0","aria-selected":e.selected?"true":"false",onClick:s=>{s.stopImmediatePropagation(),this.selectOption(e)},class:{selected:!!e.selected}},a.h("label",{htmlFor:e.value},a.h("input",{"aria-hidden":"true",id:e.value,type:"checkbox",checked:e.selected}),a.h("span",null,e.label)))}render(){var e,s;return a.h(a.Host,{key:"f4652f92d5814ddc59b0af4f430b8c6bf8c53056"},a.h("div",{key:"ef1db0ae49a7c75cb9cfc909ac83b65d172d242b",class:"dropdown",part:"msd_dropdown"},a.h("label",{key:"14c4bfa2dfebf9bb1c84f31926c0cb5113867218",class:"dropdown-label",part:"msd_dropdown-label"},a.h("p",{key:"588aad0241a5afd894f11ab4826ec1c2e159e51e"},a.h("span",{key:"b99c592d1895a51075ea46e2f5ac94bed4d7d8d7",class:"label"},this.label),this.required&&a.h("span",{class:"required"},"*")),a.h("slot",{key:"2161c9a28066e0cf26289cb2fb20493ef7be51da",name:"label-icon","aria-hidden":"true"})),a.h("button",{key:"3a39cfacf9faaae6177df65e49e61ec5167be1b1",name:this.name,part:`msd_dropdown-button ${this.error?"msd_dropdown-button--error":""}`,class:{dropbtn:!0,open:this.isOpen,error:!!this.error},onClick:()=>this.toggleDropdown(),"aria-haspopup":"listbox","aria-expanded":this.isOpen?"true":"false","aria-label":this.name,onKeyDown:t=>this.handleSelectButtonKeyDown(t)},a.h("slot",{key:"5d09d93a9565e2f12c8d3f8f2a391832b576e5ee",name:"select-icon","aria-hidden":"true"}),a.h("span",{key:"7f15d2a1644a44448cef246c4480354d4fa2c3d0",class:"selected-option",part:"msd_dropdown-button-selected-label"},this.getSelectedOptions().length>1?"Multiple options selected":((e=this.availableOptions.filter(t=>t.selected)[0])==null?void 0:e.label)??((s=this.availableOptions[0])==null?void 0:s.label)),a.h("span",{key:"af988d0cb66e710b0a23e72392d4cc84d36a6e17",class:this.isOpen?"open":"closed","aria-hidden":"true"},a.h("chevron-icon",{key:"64efffb0e7ab44bc44b210eea413d946cbad4dc5",width:"16",height:"16"}))),this.error?a.h("span",{class:"error",part:"msd_dropdown_error"},this.error):null,this.isOpen?null:a.h("div",{class:"selected-options"},this.getSelectedOptions().map(t=>a.h("span",{class:"selected-option"},t.label,a.h("button",{key:t.label,onClick:()=>this.selectOption(t)},a.h("close-icon",null))))),this.isOpen?a.h("div",{class:"dropdown-content",part:"msd_dropdown-content"},a.h("ul",{tabindex:"-1",role:"listbox","aria-label":this.name,"aria-multiselectable":!0,"aria-activedescendant":this.ariaActivedescendant,onKeyDown:t=>this.handleListboxKeydown(t)},this.availableOptions.map(t=>this.renderOption(t)))):null))}get el(){return a.getElement(this)}static get watchers(){return{options:["optionsChangedHandler"]}}};r.style=c;exports.multi_select_dropdown=r;
