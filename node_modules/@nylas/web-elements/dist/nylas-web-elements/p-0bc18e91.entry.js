import{r as t,h as e,F as n,c as a,H as i,a as s}from"./p-68c2fadf.js";import{R as o}from"./p-f8e3cacf.js";import{a as r,m as l,i as c,k as d}from"./p-48a8756b.js";import{D as b}from"./p-325503db.js";import{i as p,a as h,c as f,b as u,f as y}from"./p-04c8928e.js";const g=".sc-google-logo-icon-h{display:flex}";const m=g;const _=class{constructor(e){t(this,e);this.width="24";this.height="24"}render(){return e("svg",{key:"3ca599e18ce6095779ded84b497b5296f17c10d2",width:this.width,height:this.height,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e("g",{key:"88b3f5f83ede3ed85a770467f48ad836405b990a","clip-path":"url(#clip0_959_12452)"},e("path",{key:"4e15a1ff9fd5ed8752a01653cc0313519c3979ca",d:"M23.745 12.27C23.745 11.48 23.675 10.73 23.555 10H12.255V14.51H18.725C18.435 15.99 17.585 17.24 16.325 18.09V21.09H20.185C22.445 19 23.745 15.92 23.745 12.27Z",fill:"#4285F4"}),e("path",{key:"1d5b9ac448e9067003693fc996d84e4a6a6fb424",d:"M12.255 24C15.495 24 18.205 22.92 20.185 21.09L16.325 18.09C15.245 18.81 13.875 19.25 12.255 19.25C9.12504 19.25 6.47505 17.14 5.52505 14.29H1.54504V17.38C3.51504 21.3 7.56504 24 12.255 24Z",fill:"#34A853"}),e("path",{key:"60c45db031014875d1f0c51e4d96d233ff4d739e",d:"M5.52501 14.2901C5.27501 13.5701 5.145 12.8001 5.145 12.0001C5.145 11.2001 5.28501 10.4301 5.52501 9.71012V6.62012H1.545C0.725004 8.24012 0.255005 10.0601 0.255005 12.0001C0.255005 13.9401 0.725004 15.7601 1.545 17.3801L5.52501 14.2901Z",fill:"#FBBC05"}),e("path",{key:"c11e6c275b10368721e0d520d98a8f57bc38acc5",d:"M12.255 4.75C14.025 4.75 15.605 5.36 16.855 6.55L20.275 3.13C18.205 1.19 15.495 0 12.255 0C7.56504 0 3.51504 2.7 1.54504 6.62L5.52505 9.71C6.47505 6.86 9.12504 4.75 12.255 4.75Z",fill:"#EA4335"})),e("defs",{key:"9ed8d3df0e31854c32fe754fc79877ca48ea5ab9"},e("clipPath",{key:"7b54dd3d596dc38980237b59f21184a00316760f",id:"clip0_959_12452"},e("rect",{key:"6632bab4f2645c9a5dc9f3f000a7b537d5b09f22",width:24,height:24,fill:"white"}))))}};_.style=m;const v=".sc-microsoft-logo-icon-h{display:flex}";const w=v;const x=class{constructor(e){t(this,e);this.width="22";this.height="22"}render(){return e("svg",{key:"970afb49d36b25194c649b69ca0f136a588c20a4",width:this.width,height:this.height,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e("path",{key:"b3f4f95ead19fff86c4026bcf226a31a22b9c09a",d:"M0.043457 0.043457H10.4782V10.4782H0.043457V0.043457Z",fill:"#F35325"}),e("path",{key:"425e0c099da7b5e3637665f2b9240aab9dd43589",d:"M11.5217 0.043457H21.9565V10.4782H11.5217V0.043457Z",fill:"#81BC06"}),e("path",{key:"2f531126f18dd92603d2caaa31dfaf8a3dac3c9f",d:"M0.043457 11.5217H10.4782V21.9565H0.043457V11.5217Z",fill:"#05A6F0"}),e("path",{key:"b500f059a84c5223d1688410bc8378e02fc87156",d:"M11.5217 11.5217H21.9565V21.9565H11.5217V11.5217Z",fill:"#FFBA08"}))}};x.style=w;var k;(function(t){t["EventInfo"]="eventInfo";t["Availability"]="availability";t["BookingOptions"]="bookingOptions";t["Communications"]="communications";t["Participants"]="participants";t["BookingForm"]="bookingForm";t["PageStyles"]="pageStyles"})(k||(k={}));function C({id:t,formState:a,activeTab:i,i18next:s},o){return e(n,null,e("div",{key:`event-info-${t}`,class:{hide:i!==k.EventInfo}},e("nylas-event-info",null,e("div",{slot:"inputs"},e("nylas-event-title",{name:"title",exportparts:"net, net__title, net__dropdown-content"}),e("nylas-event-duration",{name:"duration",exportparts:"ned, ned__dropdown, ned__dropdown-button, ned__dropdown-content, ned__input_dropdown, ned__input_dropdown-input, ned__input_dropdown-content"}),e("nylas-event-location",{name:"location",exportparts:"nel, nel__location, nel__dropdown, nel__dropdown-button, nel__dropdown-content"}),e("nylas-event-description",{name:"description",exportparts:"nedesc, nedesc__textarea"})))),e("div",{key:`availability-${t}`,class:{hide:i!==k.Availability}},e("nylas-participant-booking-calendars",{participants:a.participants,name:"participant-booking-calendars",exportparts:"npbc, npbc__header, npbc__content, npbc__participant-container, npbc__participant-title"}),e("nylas-connected-calendars",{participants:a.participants,name:"connected-calendars",exportparts:"nccals, nccals__header, nccals__content, nccals__container, nccals__title, nccals__toggle-container, npbc__participant-toggle-container"}),e("nylas-availability-picker",{name:"availability",exportparts:"nap, nap__header, nap__select-timezone, nap__select-timezone-button, nap__select-timezone-dropdown-content, nap__availability, nap__day, nap__time-ranges, nap__time-range, nap__add-time-range, nap__time-picker-container, nap__time-picker-input, nap__time-picker-times"})),e("div",{key:`booking-options-${t}`,class:{hide:i!==k.BookingOptions}},e("nylas-scheduling-method",{name:"availability-method",readOnly:true,exportparts:"nsm, nsm__header, nsm__input-label, nsm__dropdown, nsm__dropdown-button, nsm__dropdown-content"}),e("nylas-custom-booking-flow",{exportparts:"ncbflow, ncbflow__header, ncbflow__title, ncbflow__content"},e("div",{slot:"inputs"},e("nylas-booking-confirmation-type",{name:"confirmation-type",exportparts:"nbct, nbct__header, nbct__dropdown, nbct__dropdown-button, nbct__dropdown-content"}),e("nylas-booking-confirmation-redirect",{name:"confirmation-redirect",exportparts:"nbcr, nbcr__header, nbcr__dropdown, nbcr__dropdown-button, nbcr__dropdown-content, nbcr__input-textfield"}))),e("nylas-buffer-time",{name:"buffer-time",exportparts:"nbt, nbt__header, nbt__body, nbt__dropdown-before, nbt__dropdown-button-before, nbt__dropdown-content-before, nbt__dropdown-after, nbt__dropdown-button-after, nbt__dropdown-content-after, nbt__preview"}),e("nylas-event-limits",null,e("div",{slot:"inputs"},e("nylas-min-booking-notice",{name:"min-booking-notice",exportparts:"nmbn, nmbn__number-dropdown, nmbn__number-dropdown-button, nmbn__number-dropdown-content, nmbn__period-dropdown, nmbn__period-dropdown-button, nmbn__period-dropdown-content"}),e("nylas-limit-future-bookings",{name:"limit-future-bookings",exportparts:"nlfb, nlfb__number-dropdown, nlfb__number-dropdown-button, nlfb__number-dropdown-content, nlfb__period-dropdown, nlfb__period-dropdown-button, nlfb__period-dropdown-content"}),e("nylas-min-cancellation-notice",{name:"min-cancellation-notice",exportparts:"nmcn, nmcn__number-dropdown, nmcn__number-dropdown-button, nmcn__number-dropdown-content, nmcn__period-dropdown, nmcn__period-dropdown-button, nmcn__period-dropdown-content"}),e("nylas-cancellation-policy",{name:"cancellation-policy",exportparts:"ncpolicy, ncpolicy__textarea"}))),e("nylas-timeslot-interval",{name:"timeslot-interval",exportparts:"nti, nti__header, nti__input-label, nti__dropdown, nti__dropdown-button, nti__dropdown-content"}),e("nylas-customize-booking-settings",{name:"customize-booking-settings",exportparts:"ncbs, ncbs__header, ncbs__settings, ncbs__settings-div, ncbs__additional_guests, ncbs__cancellation_options, ncbs__rescheduling_options"})),e("div",{key:`communications-${t}`,class:{hide:i!==k.Communications}},e("div",{class:"tab-header"},e("h3",null,s.t("eventCommunicationsTitle")),e("p",null,s.t("eventCommunicationsDescription"))),e("nylas-confirmation-email",{name:"confirmation-email-template",exportparts:"nce, nce__tab-heading, nce__header, nce__body, nce__confirmation-email-toggle--container, nce__summary, nce__reminder-input_dropdown, nce__reminder-input_dropdown-input, nce__reminder-input_dropdown-content"}),e("nylas-reminder-emails",{name:"reminder-emails",exportparts:"nre, nre__tab-heading, nre__header, nre__body, nre__confirmation-email-toggle--container, nre__summary, nrt, nrt__number-dropdown, nrt__number-dropdown-button, nrt__number-dropdown-content, nrt__period-dropdown, nrt__period-dropdown-button, nrt__period-dropdown-content, nrt__time-period-selector"})),e("div",{key:`participants-${t}`,class:{hide:i!==k.Participants}},e("nylas-additional-participants",{name:"participants",exportparts:"nap, nap__title, nap__subtitle, nap__content, nap__input_group, nap__input_wrapper, nap__input, nap__remove-participant"}),e("nylas-participants-custom-availability",{participants:a.participants,name:"participant-custom-availability",exportparts:"npca, npca__header, npca__content, npca__participant-container, npca__participant-title, npca__participant-toggle--container, npca__toggle-label, npca__toggle-input, npca__toggle-slider"})),e("div",{key:`page-styles-${t}`,class:{hide:i!==k.PageStyles}},e("nylas-custom-event-slug",{name:"custom-event-slug",exportparts:"nces, nces__body, nces__header, nces__drawer-toggle--container, nces__input-textfield"}),e("nylas-page-name",{name:"page-name",exportparts:"npn, npn__body, npn__header, npn__drawer-toggle--container, npn__input-textfield"}),e("nylas-page-styling",{name:"page-styling",exportparts:"nps, nps__header, nps__drawer-toggle--container, nps__body, nps__title-input-textfield, nps__company-logo-input-textfield, nps__color-picker, nps__color-picker-button, nps__color-picker-button-label, nps__color-picker-selected-label, nps__submit-button-label-input-textfield, nps__message-textarea"},o)),e("div",{key:`booking-form-${t}`,class:{hide:i!==k.BookingForm}},e("nylas-booking-form-config",{name:"additional-fields",exportparts:"nbfc, nbfc__header, nbfc__add_field, nbfc__add_field-button, nbfc__add_field-content, nbfc__additional_fields, nbfc__form-field, nbfc__form-field-header, nbfc__form-field-content"})))}const S='.sc-nylas-editor-tabs-h{display:block;--nylas-primary:#2563eb;--nylas-error:#cc4841;--nylas-error-pressed:#992222;--nylas-wraning:#f06c00;--nylas-success:#16a392;--nylas-info:#2b8fc2;--nylas-base-0:#ffffff;--nylas-base-25:#fcfcfd;--nylas-base-50:#f8f9fc;--nylas-base-100:#eaecf5;--nylas-base-200:#d5d9eb;--nylas-base-300:#b3b8d8;--nylas-base-400:#717bbc;--nylas-base-500:#4e5ba6;--nylas-base-600:#3e4784;--nylas-base-700:#263f72;--nylas-base-800:#293056;--nylas-base-900:#101323;--nylas-base-950:#0e101b;--nylas-border-radius:0.25rem;--nylas-border-radius-2x:0.5rem;--nylas-border-radius-3x:0.75rem;--nylas-font-family:"Inter", sans-serif}.scheduler-editor.sc-nylas-editor-tabs{display:flex;flex-direction:column;height:inherit}.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs{height:calc(100% - 80px);display:grid;grid-template-columns:minmax(224px, 25%) 1fr}@media screen and (max-width: 768px){.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs{display:table-column-group;height:auto}}.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tabs.sc-nylas-editor-tabs{display:flex;flex-direction:column;border-right:1px solid var(--nylas-base-200);background-color:var(--nylas-base-25)}@media screen and (max-width: 768px){.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tabs.sc-nylas-editor-tabs{border-right:none}}.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tabs.sc-nylas-editor-tabs .tab.sc-nylas-editor-tabs{display:flex;align-items:center;text-align:left;gap:0.5rem;padding:0.5rem 1rem;color:var(--nylas-base-900);background:var(--nylas-base-0);border:none;height:56px;font-family:var(--nylas-font-family);font-size:16px;font-weight:500;line-height:24px;cursor:pointer}.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tabs.sc-nylas-editor-tabs .tab.sc-nylas-editor-tabs:not(:first-of-type){margin-top:0.25rem}.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tabs.sc-nylas-editor-tabs .tab.sc-nylas-editor-tabs:last-of-type{margin-bottom:0.25rem}.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tabs.sc-nylas-editor-tabs .tab.active.sc-nylas-editor-tabs{font-weight:600;background:var(--nylas-base-0);color:var(--nylas-primary);border-left:4px solid var(--nylas-primary);box-shadow:0px 1px 2px 0px rgba(0, 0, 0, 0.0588235294);box-shadow:0px 1px 3px 0px rgba(0, 0, 0, 0.1019607843)}.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tabs.sc-nylas-editor-tabs .tab.hide.sc-nylas-editor-tabs{display:none}.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tab-content.sc-nylas-editor-tabs{max-width:692px;overflow-y:auto;overflow-x:hidden}.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tab-content.sc-nylas-editor-tabs .hide.sc-nylas-editor-tabs{display:none}.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tab-content.sc-nylas-editor-tabs nylas-event-info.sc-nylas-editor-tabs,.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tab-content.sc-nylas-editor-tabs nylas-event-limits.sc-nylas-editor-tabs{width:inherit}.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tab-content.sc-nylas-editor-tabs nylas-event-info.sc-nylas-editor-tabs div[slot=inputs].sc-nylas-editor-tabs,.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tab-content.sc-nylas-editor-tabs nylas-event-limits.sc-nylas-editor-tabs div[slot=inputs].sc-nylas-editor-tabs{display:flex;flex-direction:column;gap:1rem}.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tab-content.sc-nylas-editor-tabs .tab-header.sc-nylas-editor-tabs{display:flex;flex-direction:column;margin:1rem 1rem 0.5rem;row-gap:4px}.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tab-content.sc-nylas-editor-tabs .tab-header.sc-nylas-editor-tabs h3.sc-nylas-editor-tabs{margin:0;font-size:16px;font-weight:600;line-height:20px;color:var(--nylas-base-900);text-align:left}.scheduler-editor.sc-nylas-editor-tabs .form-contents.sc-nylas-editor-tabs .tab-content.sc-nylas-editor-tabs .tab-header.sc-nylas-editor-tabs p.sc-nylas-editor-tabs{margin:0;font-size:0.875rem;font-weight:400;line-height:20px;color:var(--nylas-base-600);text-align:left}.footer.sc-nylas-editor-tabs{display:flex;justify-content:space-between;align-items:center;gap:1rem;min-height:80px;padding:0 1rem;border-top:1px solid var(--nylas-base-200)}@media screen and (max-width: 768px){.footer.sc-nylas-editor-tabs{flex-direction:column;height:auto}}@media screen and (max-width: 768px){.footer.sc-nylas-editor-tabs .preview.sc-nylas-editor-tabs{margin-top:1rem;width:100%}}.footer.sc-nylas-editor-tabs .buttons.sc-nylas-editor-tabs{display:flex;justify-content:flex-end;align-items:center;justify-self:flex-end;gap:1rem}@media screen and (max-width: 768px){.footer.sc-nylas-editor-tabs .buttons.sc-nylas-editor-tabs{flex-direction:column-reverse;width:100%}}.footer.sc-nylas-editor-tabs .buttons.sc-nylas-editor-tabs p.sc-nylas-editor-tabs{max-width:524px}.footer.sc-nylas-editor-tabs .buttons.sc-nylas-editor-tabs p.unsaved-changes.sc-nylas-editor-tabs{color:var(--nylas-base-600)}.footer.sc-nylas-editor-tabs .buttons.sc-nylas-editor-tabs p.saved-changes.sc-nylas-editor-tabs{color:var(--nylas-success)}.footer.sc-nylas-editor-tabs .buttons.sc-nylas-editor-tabs p.error.sc-nylas-editor-tabs{color:var(--nylas-error)}.footer.sc-nylas-editor-tabs .buttons.sc-nylas-editor-tabs p.error-full-width.sc-nylas-editor-tabs{max-width:660px}@media screen and (max-width: 768px){.footer.sc-nylas-editor-tabs .buttons.sc-nylas-editor-tabs button-component.sc-nylas-editor-tabs{width:100%}}.footer.sc-nylas-editor-tabs .buttons.sc-nylas-editor-tabs button.sc-nylas-editor-tabs{background:var(--nylas-primary);color:var(--nylas-base-0);height:48px;border:none;border-radius:var(--nylas-border-radius-2x);font-size:16px;line-height:24px;padding:0 1rem;cursor:pointer;width:148px}.footer.sc-nylas-editor-tabs .buttons.sc-nylas-editor-tabs button.sc-nylas-editor-tabs:hover{background:var(--nylas-base-600)}.footer.sc-nylas-editor-tabs .buttons.sc-nylas-editor-tabs button.sc-nylas-editor-tabs:active{background:var(--nylas-base-800)}.footer.sc-nylas-editor-tabs .buttons.sc-nylas-editor-tabs button.sc-nylas-editor-tabs:disabled{background:var(--nylas-base-300);cursor:not-allowed}.footer.sc-nylas-editor-tabs .buttons.sc-nylas-editor-tabs button.sc-nylas-editor-tabs span.sc-nylas-editor-tabs{display:flex;align-items:center;justify-content:center;gap:0.5rem}button-component#report-issue.sc-nylas-editor-tabs{width:auto}nylas-feedback-form.sc-nylas-editor-tabs{position:absolute;top:0;height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:rgba(0, 0, 0, 0.6);z-index:2;border-radius:inherit}';const H=S;var T=undefined&&undefined.__decorate||function(t,e,n,a){var i=arguments.length,s=i<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,n):a,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,n,a);else for(var r=t.length-1;r>=0;r--)if(o=t[r])s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s;return i>3&&s&&Object.defineProperty(e,n,s),s};var L=undefined&&undefined.__metadata||function(t,e){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,e)};const B=class{constructor(e){t(this,e);this.schedulerConfigChanged=a(this,"schedulerConfigChanged",7);this.schedulerConfigCreated=a(this,"schedulerConfigCreated",7);this.cancelButtonClick=a(this,"cancelButtonClick",7);this.formSubmitted=a(this,"formSubmitted",7);this.previewButtonClicked=a(this,"previewButtonClicked",7);this.schedulerEditorFormUpdated=a(this,"schedulerEditorFormUpdated",7);this.formSubmissionHandler=async t=>{t.preventDefault();const e=await this.formSubmitted.emit();r("[nylas-editor-tabs]","formSubmissionHandler",e);const n=this.formRef.checkValidity();if(!n||e.defaultPrevented){this.error=this.formRef.validationMessage||"Please fix the form errors.";return}this.isLoading=true;this.hasUnsavedChanges=false;const a=this.updateFormState();r("[nylas-editor-tabs]","formState",a);const{title:i,description:s,duration:o,availability:c,bookingCalendar:d,location:p,bookingType:h,buffer:f,availableDaysInFuture:u,minCancellationNotice:y,minBookingNotice:g,cancellationPolicy:m,timeslotInterval:_,additionalGuestsHidden:v,hideCancellationOptions:w,hideReschedulingOptions:x,participants:k,participantOpenHours:C,additionalFields:S,participantCalendars:H,conferencing:T,participantBookingCalendars:L,reminders:B,emailTemplate:z,redirectUrl:P,availabilityMethod:j,slug:F,appearance:O,name:N}=a;const $=this.selectedConfiguration?.participants?.find((t=>t.is_organizer))||k?.find((t=>t.is_organizer));const I=H&&$?.email?H[$?.email]:[];const M=$?.booking?.calendar_id||d;const R=o?parseInt(o):30;const D=k&&k?.length>0?k:[{name:$?.name??this.currentUser?.name??"",email:$?.email??this.currentUser?.email??"",is_organizer:true,timezone:c?.timezone??Intl.DateTimeFormat().resolvedOptions().timeZone,availability:{calendar_ids:d&&d!==""?[d]:["primary"],open_hours:[]},booking:{calendar_id:d&&d!==""?d:"primary"}}];const E={...this.selectedConfiguration?.id&&{id:this.selectedConfiguration.id},version:this.selectedConfiguration?.version??"1.0.0",slug:F,name:N,availability:{duration_minutes:R,interval_minutes:_?.interval??R,round_to:_?.roundTo,availability_rules:{availability_method:j?j:this.selectedConfiguration?.availability?.availability_rules?.availability_method??"collective",buffer:f||{before:0,after:0},default_open_hours:c?.openHours??this.selectedConfiguration?.availability?.availability_rules?.default_open_hours??b,round_robin_group_id:this.selectedConfiguration?.availability?.availability_rules?.round_robin_group_id??""}},participants:[...D?D.map((t=>{let e=c?.timezone??Intl.DateTimeFormat().resolvedOptions().timeZone;if(C?.[t.email]?.length){e=C?.[t.email]?.[0]?.timezone}if(t.is_organizer){const n=L?.[t.email]?L?.[t.email]:M?M:"primary";const a=H?.[t.email]?H?.[t.email]:I?.length?I:["primary"];const i=a.length===1&&a[0]==="primary";return{name:t.name??"",email:t.email,is_organizer:true,timezone:e,availability:{calendar_ids:i?[n]:a,open_hours:C?.[t.email]??t.availability?.open_hours??[]},booking:{calendar_id:n}}}const n=L?.[t.email]?{calendar_id:L?.[t.email]}:t?.booking??undefined;const a=H?.[t.email]??t.availability?.calendar_ids??["primary"];const i=a.length===1&&a[0]==="primary";return{...t,timezone:e,availability:t.availability?{calendar_ids:i&&typeof n!=="undefined"?[n?.calendar_id]:a,open_hours:C?.[t.email]??t.availability?.open_hours??[]}:undefined,booking:n}})):[]],event_booking:{title:i?.toString()??"",description:s?.toString()??"",location:p?.toString()??"",booking_type:h?.toString()??"booking",timezone:c?.timezone??Intl.DateTimeFormat().resolvedOptions().timeZone,conferencing:T,reminders:B},scheduler:{cancellation_policy:m??"",available_days_in_future:u??30,min_cancellation_notice:y??0,min_booking_notice:g??60,hide_additional_guests:v??false,hide_cancellation_options:w??false,hide_rescheduling_options:x??false,additional_fields:S,email_template:z,confirmation_redirect_url:P},appearance:O};const V=l(this.selectedConfiguration,E||{});const J=this.action==="create"?V:E;if(this.isConfigRoundRobin(J)){J.participants=J.participants.map((t=>({...t,is_organizer:undefined})))}const U=t=>{this.isLoading=false;this.changesSaved=true;setTimeout((()=>{this.changesSaved=false}),5e3)};const A=this.checkForBookingFormErrors(J);const Z=this.configurations?.find((t=>t.id===this.selectedConfiguration?.id))||{};const W=this.checkForOrganizerConfirmationError(l(J,Z));if(A||W){return}this.schedulerConfigChanged.emit({config:J,resetLoadingState:U,action:this.action,host:this.host})};this.isConfigRoundRobin=t=>t?.availability?.availability_rules?.availability_method==="max-availability"||t.availability?.availability_rules?.availability_method==="max-fairness";this.checkForOrganizerConfirmationError=t=>{let e=false;let n="";const a=t.event_booking?.booking_type==="organizer-confirmation";const i=t.scheduler?.organizer_confirmation_url;if(a&&!i){n+="Organizer confirmation URL is required when using organizer confirmation booking type.";e=true}if(e){this.isLoading=false;this.host.setError(new Error(n))}return e};this.checkForBookingFormErrors=t=>{let e=false;let n="";const a=t.scheduler?.additional_fields;if(a){n="Booking form error: ";Object.entries(a).forEach((t=>{const a=t[1];if(a.label===""){n+=`Label is required for field of type ${a.type}.`;e=true;return}if(a.options){for(const t of a.options){if(t.trim()===""){n+=`Empty option detected inside ${a.label} of type ${a.type}.`;e=true;break}}}}))}if(e){this.isLoading=false;this.host.setError(new Error(n))}return e};this.calendars=undefined;this.selectedConfiguration=undefined;this.configurations=undefined;this.currentUser=undefined;this.schedulerPreviewLink="";this.mode="app";this.hideEditorTabs=[];this.enableUserFeedback=true;this.selectedLanguage=undefined;this.action="create";this.showFeedbackModal=false;this.activeTab=k.EventInfo;this.isLoading=false;this.hasUnsavedChanges=false;this.changesSaved=false;this.formState={};this.error=""}configChangedHandler(t){r("[nylas-editor-tabs]","configChangedHandler",t,this.selectedConfiguration);this.formState={...this.getFormStateFromConfig(t)};if(t?.id){this.action="edit"}else{this.action="create"}}userChangedHandler(t){r("[nylas-editor-tabs]","userChangedHandler",t);if(t){this.formState={...this.getFormStateFromConfig(this.selectedConfiguration)}}}selectedLanguageChangedHandler(t,e){if(t===e)return;c.changeLanguage(t)}async schedulerConfigCreatedEventHandler(t){const e=this.schedulerConfigCreated.emit(t);return e}async setError(t){this.error=t.message}connectedCallback(){r("[nylas-editor-tabs]","connectedCallback")}componentWillLoad(){r("[nylas-editor-tabs]","componentWillLoad");this.formState=this.getFormStateFromConfig(this.selectedConfiguration)}componentDidLoad(){r("[nylas-editor-tabs]","componentDidLoad");if(this.enableUserFeedback&&!p()){h({dsn:"https://9d5731f1c77ca84c9ed3fb9b3ccf7ee1@o74852.ingest.us.sentry.io/4507889638178816",release:"1.3.4",integrations:t=>[...t.filter((t=>false)),y({colorScheme:"system",autoInject:false})],autoSessionTracking:false,beforeSend:()=>null})}if(this.selectedConfiguration?.id){this.configChangedHandler(this.selectedConfiguration)}const t=this.host.querySelector("button.tab:not(.hide)")?.name;if(t){this.activeTab=t}}disconnectedCallback(){r("[nylas-editor-tabs]","disconnectedCallback")}handleValueChanged(t){r("[nylas-editor-tabs]","handleValueChanged",t);const{name:e,value:n}=t.detail;this.setFormState(n,e);this.formState={...this.formState};this.hasUnsavedChanges=true;this.error="";this.schedulerEditorFormUpdated.emit({value:t.detail.value,name:t.detail.name})}feedbackModalClosedHandler(){this.showFeedbackModal=false}feedbackSubmittedHandler(t){const e=f("Scheduler Editor User Feedback");const n={eventId:e,message:t.detail.feedback};u(n,{includeReplay:true,captureContext:{tags:{"nylas-web-element":"nylas-scheduler-editor","nylas-web-element-version":"1.3.4"},extra:{configId:this.selectedConfiguration?.id,slug:this.selectedConfiguration?.slug}}});this.showFeedbackModal=false}getFormStateFromConfig(t){let e=t?.participants?.find((t=>t.is_organizer));if(!e&&t?.availability?.availability_rules?.availability_method!=="collective"){e=t?.participants?.find((t=>t.email===this.currentUser?.email));if(e){e.is_organizer=true}}if(t?.appearance){console.info("Appearance settings have been returned from the given configuration; please remember to grab them from the configSettingsLoaded event and apply them as desired.")}return{title:t?.event_booking?.title??"",description:t?.event_booking?.description??"",duration:t?.availability?.duration_minutes?.toString()??"30",availability:{timezone:t?.event_booking?.timezone??Intl.DateTimeFormat().resolvedOptions().timeZone,openHours:t?.availability?.availability_rules?.default_open_hours??b},additionalFields:t?.scheduler?.additional_fields??{},conferencing:t?.event_booking?.conferencing??{},calendarIds:e?.availability?.calendar_ids??[],participants:t?.participants??[],bookingCalendar:e?.booking?.calendar_id??e?.email??"",location:t?.event_booking?.location??"",bookingType:t?.event_booking?.booking_type??"booking",buffer:t?.availability?.availability_rules?.buffer??{before:0,after:0},cancellationPolicy:t?.scheduler?.cancellation_policy??"",availableDaysInFuture:t?.scheduler?.available_days_in_future??30,minCancellationNotice:t?.scheduler?.min_cancellation_notice??0,minBookingNotice:t?.scheduler?.min_booking_notice??60,timeslotInterval:{interval:t?.availability?.interval_minutes??t?.availability?.duration_minutes,roundTo:t?.availability?.round_to},additionalGuestsHidden:t?.scheduler?.hide_additional_guests??false,hideCancellationOptions:t?.scheduler?.hide_cancellation_options??false,hideReschedulingOptions:t?.scheduler?.hide_rescheduling_options??false,participantBookingCalendars:t?.participants?.reduce(((t,e)=>{if(e.booking?.calendar_id){t[e.email]=e.booking?.calendar_id}return t}))??{},participantCalendars:t?.participants?.reduce(((t,e)=>{t[e.email]=e.availability?.calendar_ids;return t}),{})??{},reminders:t?.event_booking?.reminders,emailTemplate:t?.scheduler?.email_template,redirectUrl:t?.scheduler?.confirmation_redirect_url,slug:t?.slug,appearance:t?.appearance,name:t?.name}}setFormState(t,e){switch(e){case"title":this.formState.title=t.toString();break;case"description":this.formState.description=t.toString();break;case"duration":this.formState.duration=t.toString();break;case"availability":this.formState.availability=JSON.parse(t.toString());break;case"participants":this.formState.participants=JSON.parse(t.toString());break;case"booking-calendar":this.formState.bookingCalendar=t.toString();break;case"participant-booking-calendars":this.formState.participantBookingCalendars=JSON.parse(t.toString());break;case"location":this.formState.location=t.toString();break;case"conference":this.formState.conferencing=JSON.parse(t.toString());break;case"confirmation-type":this.formState.bookingType=t.toString();break;case"buffer-time":this.formState.buffer=JSON.parse(t.toString());break;case"limit-future-bookings":this.formState.availableDaysInFuture=parseInt(t.toString());break;case"min-cancellation-notice":this.formState.minCancellationNotice=parseInt(t.toString());break;case"min-booking-notice":this.formState.minBookingNotice=parseInt(t.toString());break;case"cancellation-policy":this.formState.cancellationPolicy=t.toString();break;case"timeslot-interval":this.formState.timeslotInterval=JSON.parse(t.toString());break;case"customize-booking-settings":{const e=JSON.parse(t.toString());this.formState.additionalGuestsHidden=e.additionalGuestsHidden;this.formState.hideCancellationOptions=e.hideCancellationOptions;this.formState.hideReschedulingOptions=e.hideReschedulingOptions;break}case"participant-custom-availability":{const e=JSON.parse(t.toString());this.formState.participantOpenHours=e;break}case"additional-fields":this.formState.additionalFields=t;break;case"connected-calendars":this.formState.participantCalendars=JSON.parse(t.toString());break;case"confirmation-email-template":this.formState.emailTemplate=JSON.parse(t.toString());break;case"reminder-overrides":this.formState.reminders=JSON.parse(t.toString());break;case"confirmation-redirect":this.formState.redirectUrl=t.toString();break;case"availability-method":this.formState.availabilityMethod=t.toString();break;case"custom-event-slug":console.debug("custom-event-slug",t);this.formState.slug=JSON.parse(t.toString());break;case"page-styling":this.formState.appearance=JSON.parse(t.toString());break;case"page-name":this.formState.name=JSON.parse(t.toString());break}this.schedulerEditorFormUpdated.emit({value:t,name:e})}updateFormState(){const t=new FormData(this.formRef);t.forEach(((t,e)=>{this.setFormState(t,e)}));this.formState={...this.formState};return this.formState}setActiveTab(t,e){t.preventDefault();this.updateFormState();this.activeTab=e}hideTab(t){return this.hideEditorTabs?.includes(t)||false}onFeedbackClick(t){t.preventDefault();this.showFeedbackModal=true}render(){r("[nylas-editor-tabs]","render",this.formState);return e(i,{key:"afd735b73e35d8abfa9c83d21ab8307b07df48e6"},e("form",{key:"7d7093deb88e6ec8e636092e4bcbadf03916a994",onSubmit:this.formSubmissionHandler,class:"scheduler-editor",ref:t=>this.formRef=t,noValidate:true},this.mode==="app"?e("div",{class:"form-contents",part:"editor__form-contents net__form-contents"},e("div",{class:"tabs",part:"editor__tabs net__tabs"},e("button",{name:k.EventInfo,class:{tab:true,active:this.activeTab==k.EventInfo,hide:this.hideTab(k.EventInfo)},part:"editortab__event-info net__tab-event-info",onClick:t=>this.setActiveTab(t,k.EventInfo)},e("calendar-info-icon",{width:"16",height:"16"}),c.t("eventInfoTab")),e("button",{name:k.Availability,class:{tab:true,active:this.activeTab==k.Availability,hide:this.hideTab(k.Availability)},part:"editortab__availability net__tab-availability",onClick:t=>this.setActiveTab(t,k.Availability)},e("calendar-patterns-icon",{width:"16",height:"16"}),c.t("availabilityTab")),e("button",{name:k.Participants,class:{tab:true,active:this.activeTab==k.Participants,hide:this.hideTab(k.Participants)},part:"editortab__participants net__tab-participants",onClick:t=>this.setActiveTab(t,k.Participants)},e("people-icon",{width:"16",height:"16"}),c.t("participantsTab")),e("button",{name:k.BookingOptions,class:{tab:true,active:this.activeTab==k.BookingOptions,hide:this.hideTab(k.BookingOptions)},part:"editortab__booking-options net__tab-booking-options",onClick:t=>this.setActiveTab(t,k.BookingOptions)},e("flow-icon",{width:"16",height:"16"}),c.t("bookingOptionsTab")),e("button",{name:k.BookingForm,class:{tab:true,active:this.activeTab=="bookingForm",hide:this.hideTab(k.BookingForm)},part:"editortab__booking-form net__tab-booking-form",onClick:t=>this.setActiveTab(t,k.BookingForm)},this.activeTab==k.BookingForm?e("calendar-agenda-fill-icon",{width:"16",height:"16"}):e("calendar-agenda-icon",{width:"16",height:"16"}),c.t("bookingFormTab")),e("button",{name:k.Communications,class:{tab:true,active:this.activeTab=="communications",hide:this.hideTab(k.Communications)},onClick:t=>this.setActiveTab(t,k.Communications),part:"editortab__communications net__tab-communications"},this.activeTab==k.Communications?e("envelope-fill-icon",{width:"16",height:"16"}):e("envelope-icon",{width:"16",height:"16"}),c.t("communicationsTab")),e("button",{name:k.PageStyles,class:{tab:true,active:this.activeTab=="pageStyles",hide:this.hideTab(k.PageStyles)},onClick:t=>this.setActiveTab(t,k.PageStyles),part:"editortab__page-styles net__tab-page-styles"},this.activeTab==k.PageStyles?e("paintbrush-fill-icon",{width:"16",height:"16"}):e("paintbrush-icon",{width:"16",height:"16"}),c.t("pageStylesTab"))),e("div",{class:"tab-content",part:"editor__tab-content net__tab-content"},e(C,{formState:this.formState,activeTab:this.activeTab,currentUser:this.currentUser,calendars:this.calendars,id:this.selectedConfiguration?.id??"new",i18next:c}))):e("div",{class:"composable",key:this.selectedConfiguration?.id},e("slot",null)),e("div",{key:"d2d76b6b587c13a32dfc749f4fea4b47102923f0",class:"footer",part:"editor__footer net__footer"},e("div",{key:"7714cacce55f8b8e06e60f289ef02fe8e336419c",class:"preview",part:"editor__footer-preview net__footer-preview"},this.enableUserFeedback&&e("button-component",{title:"Share your feedback",id:"report-issue",variant:"basic",onClick:t=>this.onFeedbackClick(t)},e("feedback-icon",null))),e("div",{key:"54d1b26ae9e1ffc22fbe679e40ad0ec40f4df3fb",class:"buttons",part:"editor__footer-buttons net__footer-buttons"},e("p",{key:"e443a0cc63281f971bbdf7349e1adbb88abb42a9",class:{"unsaved-changes":this.hasUnsavedChanges&&!this.changesSaved,"saved-changes":this.changesSaved,error:this.error!=="","error-full-width":this.error!==""&&this.action==="create"}},this.error!==""?this.error:"",this.error==""&&this.hasUnsavedChanges&&!this.changesSaved?"Unsaved changes":this.error==""&&this.changesSaved?"Changes saved!":""),this.schedulerPreviewLink!==""&&this.action==="edit"&&e("button-component",{title:"Preview",type:"button",disabled:this.isLoading,clickHandler:t=>{t.preventDefault();const e=this.previewButtonClicked.emit(this.host);if(!e.defaultPrevented){window.open(d(this.schedulerPreviewLink,this.selectedConfiguration),"_blank")}},variant:"basic"},e("eye-icon",null)),e("button-component",{key:"057295595f302e2090a0136981a09546f6994c1c",type:"button",disabled:this.isLoading,clickHandler:t=>{t.preventDefault();this.cancelButtonClick.emit();this.error=""},variant:"basic",part:"editor__footer-cancel net__footer-cancel"},c.t("backButton")),e("button-component",{key:"18ba294735d5754526a3634f5c7dc7dfd87d1679",type:"submit",disabled:this.isLoading,part:"editor__footer-cta, net__footer-cta"},this.isLoading?e("span",null,c.t("savingButtonText"),e("loading-icon",null)," "):this.action==="create"?`${c.t("createButtonText")}`:`${c.t("saveChangesButtonText")}`)))),this.showFeedbackModal&&e("nylas-feedback-form",null))}get host(){return s(this)}static get watchers(){return{selectedConfiguration:["configChangedHandler"],currentUser:["userChangedHandler"],selectedLanguage:["selectedLanguageChangedHandler"]}}};T([o({name:"nylas-editor-tabs",stateToProps:new Map([["schedulerConfig.calendars","calendars"],["schedulerConfig.selectedConfiguration","selectedConfiguration"],["schedulerConfig.currentUser","currentUser"],["schedulerConfig.configurations","configurations"],["schedulerConfig.selectedLanguage","selectedLanguage"]]),eventToProps:{schedulerConfigChanged:async(t,e)=>{const{resetLoadingState:n,host:a,action:i,config:s}=t.detail;const o=e=>{const[s,o]=e;if(!s&&o){a.setError(o)}else if(s&&!o&&i==="create"){a.schedulerConfigCreatedEventHandler({config:s})}if(n){n(t)}};if(i==="edit"){const t=await e.schedulerConfig.updateConfiguration(s);o(t)}else{const t=await e.schedulerConfig.createConfiguration(s);o(t)}},cancelButtonClick:async(t,e)=>{e.schedulerConfigStore.state.action=null},previewButtonClicked:async(t,e)=>{r("[nylas-editor-tabs]","previewButtonClicked",e)},formSubmitted:async(t,e)=>{r("[nylas-editor-tabs]","formSubmitted",e)},schedulerEditorFormUpdated:async(t,e)=>{r("[nylas-editor-tabs]","schedulerEditorFormUpdated",t)},schedulerConfigCreated:async(t,e)=>{r("[nylas-editor-tabs]","schedulerConfigCreated",t)}},localPropsToProp:new Map([["schedulerPreviewLink","schedulerPreviewLink"],["enableUserFeedback","enableUserFeedback"],["hideEditorTabs","hideEditorTabs"]]),fireRegisterEvent:true}),L("design:type",Function),L("design:paramtypes",[]),L("design:returntype",void 0)],B.prototype,"render",null);B.style=H;const z=':host{display:grid;grid-auto-flow:row;width:100%;font-family:inherit;font-optical-sizing:auto;--nylas-primary:#2563eb;--nylas-error:#cc4841;--nylas-error-pressed:#992222;--nylas-wraning:#f06c00;--nylas-success:#16a392;--nylas-info:#2b8fc2;--nylas-base-0:#ffffff;--nylas-base-25:#fcfcfd;--nylas-base-50:#f8f9fc;--nylas-base-100:#eaecf5;--nylas-base-200:#d5d9eb;--nylas-base-300:#b3b8d8;--nylas-base-400:#717bbc;--nylas-base-500:#4e5ba6;--nylas-base-600:#3e4784;--nylas-base-700:#263f72;--nylas-base-800:#293056;--nylas-base-900:#101323;--nylas-base-950:#0e101b;--nylas-border-radius:0.25rem;--nylas-border-radius-2x:0.5rem;--nylas-border-radius-3x:0.75rem;--nylas-font-family:"Inter", sans-serif}.header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;gap:1rem}@media screen and (max-width: 768px){.header{flex-direction:column;gap:0.5rem;align-items:unset}}.header h2{margin:0;font-size:1.25rem;color:var(--nylas-base-900);font-weight:600}.header p{margin:0;font-size:16px;color:var(--nylas-base-700)}.header .actions{justify-self:end}@media screen and (max-width: 768px){.header .actions{width:100%}}.configurations{border:1px solid var(--nylas-base-200);border-radius:var(--nylas-border-radius-2x);background:var(--nylas-base-0);height:100%;display:flex;flex-direction:column;position:relative;overflow-y:hidden}.configurations .table-container{overflow-y:auto;flex:1}.configurations .table-container table{width:100%;border-spacing:0;border-collapse:collapse;font-family:inherit;height:max-content}.configurations .table-container table.no-configurations{height:100%}.configurations .table-container table tr{color:var(--nylas-base-800);border-bottom:1px solid var(--nylas-base-200);font-family:inherit}.configurations .table-container table tr.hide{display:none}.configurations .table-container table th{font-weight:600;text-transform:uppercase;font-size:14px;line-height:20px}.configurations .table-container table tr.no-configurations td>div{display:flex;height:100%;justify-content:center;align-items:center;flex-direction:column;padding:var(--nylas-border-radius-3x)}.configurations .table-container table tr.no-configurations td>div h3{margin:0 0 1rem 0;color:var(--nylas-base-700)}.configurations .table-container table tr.no-configurations td>div p{margin:0 0 1rem 0;color:var(--nylas-base-600)}.configurations .table-container table tr.no-configurations td>div calendar-icon{margin-bottom:1rem;color:var(--nylas-base-200)}.configurations .table-container table th,.configurations .table-container table td{text-align:left;padding:1rem;font-family:inherit}.configurations .table-container table .actions{display:flex;justify-content:flex-end;gap:1rem;text-align:right}@media screen and (max-width: 768px){.configurations .table-container table .actions{flex-direction:column;gap:0.5rem}}.configurations .table-container table .actions select-dropdown.last::part(sd_dropdown-content){bottom:54px}.configurations .table-container table .title{width:100%;max-width:300px}@media screen and (max-width: 768px){.configurations .table-container table .title{max-width:96px}}.configurations .table-container table .title div{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.configurations .table-container table .title div.config-event-title{font-weight:600}.configurations .table-container table .title div.config-event-description{font-size:0.75rem}.configurations .pagination{padding:1rem;position:sticky;top:100%;display:flex;justify-content:flex-end;gap:0.5rem;background:white;width:calc(100% - 2rem);z-index:2}.configurations .pagination td.arrows{display:flex;justify-content:flex-end;gap:0.5rem}.configurations .pagination button{display:flex;flex-direction:row;justify-content:center;align-items:center;height:3vh;width:3vh;min-width:3em;min-height:3em;cursor:pointer;border-radius:var(--nylas-border-radius-2x);border:1px solid var(--nylas-base-300);background-color:transparent;color:var(--nylas-base-800);cursor:pointer}.configurations .pagination button:hover:not(:disabled){border:1px solid var(--nylas-primary)}.configurations .pagination button:active{border:1px solid var(--nylas-base-800)}.configurations .pagination button:disabled{border:1px solid var(--nylas-base-100);background-color:transparent;color:var(--nylas-base-300);cursor:not-allowed}.configurations .pagination button.right{transform:rotate(180deg)}.error-container{margin-top:1.5rem}.error-container .error{color:var(--nylas-error);padding:0.5rem 0;margin:1rem 0 0}button-component#copy button{width:108px}select-dropdown{width:auto}select-dropdown::part(sd_dropdown-button){display:block;height:48px;padding:0px 16px 8px}@media screen and (max-width: 768px){select-dropdown::part(sd_dropdown-button){width:92px}}select-dropdown::part(sd_dropdown-content){width:120px;right:0}select-dropdown::part(sd_dropdown-labelhtml){display:flex;gap:0.5rem;align-items:center;color:var(--nylas-base-900)}select-dropdown::part(sd_dropdown-labelhtml):hover{color:var(--nylas-primary)}.card-wrapper{position:absolute;top:0;left:0;height:calc(100% + 4rem);width:-webkit-fill-available;width:-moz-available;width:fill-available;display:flex;flex-direction:column;justify-content:center;align-items:center;background:rgba(0, 0, 0, 0.6);z-index:2;border-radius:var(--nylas-border-radius-2x)}@media screen and (max-width: 768px){.card-wrapper{justify-content:start;height:100%}}.card-modal{background:var(--nylas-base-0);display:flex;flex-direction:column;font-family:var(--nylas-font-family);background-color:var(--nylas-base-0);color:var(--nylas-base-900);border-radius:var(--nylas-border-radius-3x);padding:32px;width:562px;box-shadow:0px 1px 4px rgba(0, 0, 0, 0.1), 0px 3px 6px rgba(0, 0, 0, 0.06)}@media screen and (max-width: 768px){.card-modal{width:auto;border-radius:0px}}.description.title-desc{margin-bottom:2rem}.description p{margin:0;font-size:18px;color:var(--nylas-base-600)}.footer{margin-top:1rem;padding-top:1rem;display:flex;justify-content:flex-end;gap:0.5rem;box-sizing:border-box;background-color:var(--nylas-base-25);width:100%;border-radius:0 0 var(--nylas-border-radius-2x) var(--nylas-border-radius-2x)}.close-button{width:100%;display:flex;justify-content:flex-end}.close-button button-component button{padding:0;height:auto}.close-button button-component button:hover{background-color:transparent !important}button-component{--dot-color:var(--nylas-base-700)}';const P=z;var j=undefined&&undefined.__decorate||function(t,e,n,a){var i=arguments.length,s=i<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,n):a,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,e,n,a);else for(var r=t.length-1;r>=0;r--)if(o=t[r])s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s;return i>3&&s&&Object.defineProperty(e,n,s),s};var F=undefined&&undefined.__metadata||function(t,e){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(t,e)};const O=class{constructor(e){t(this,e);this.initListConfigurations=a(this,"initListConfigurations",7);this.createButtonClick=a(this,"createButtonClick",7);this.editButtonClick=a(this,"editButtonClick",7);this.deleteButtonClick=a(this,"deleteButtonClick",7);this.configurations=[];this.selectedLanguage=undefined;this.schedulerPreviewLink="";this.listConfigurationsNextCursor=undefined;this.state="loading";this.error="";this.currentCursor=null;this.previousCursors=[];this.disableNextPageButton=false;this.deleteConfigurationId="";this.showDeleteButtonLoading=false}listConfigurationsNextCursorChangedHandler(t,e){if(!t||t===e){if(t===null){this.disableNextPageButton=true}return}this.disableNextPageButton=false;this.currentCursor=t}selectedLanguageChangedHandler(t,e){if(t===e)return;c.changeLanguage(t)}connectedCallback(){r("[nylas-list-configurations]","connectedCallback")}componentWillLoad(){r("[nylas-list-configurations]","componentWillLoad");if(this.configurations&&this.configurations.length>0){this.state="loaded"}}componentDidLoad(){r("[nylas-list-configurations]","componentDidLoad");this.initListConfigurations.emit({host:this.host})}disconnectedCallback(){r("[nylas-list-configurations]","disconnectedCallback")}async handleNylasFormDropdownChanged(t){r("[nylas-list-configurations]","handleNylasFormDropdownChanged",t.detail);const{value:e}=t.detail;const[n,a]=e.split("-");t.preventDefault();switch(n){case"delete":this.deleteConfigurationId=this.configurations[a]?.id;break;case"preview":window.open(d(this.schedulerPreviewLink,this.configurations[a]),"_blank");break;case"copy":await navigator.clipboard.writeText(d(this.schedulerPreviewLink,this.configurations[a]));break}}async registerCallback(){this.initListConfigurations.emit({host:this.host})}async getState(){return this.state}async setState(t){this.state=t}async setError(t){this.error=t}async hideDeleteConfirmation(){this.deleteConfigurationId="";this.showDeleteButtonLoading=false}closeModal(t){t.preventDefault();this.deleteConfigurationId=""}handleConfirmDeleteButtonClicked(t){t.preventDefault();this.showDeleteButtonLoading=true;const e=this.configurations.find((t=>t.id===this.deleteConfigurationId));if(e&&e?.id){this.deleteButtonClick.emit({host:this.host,configuration:e})}}getDurationString(t){const e=Math.floor(t/60);const n=t%60;return`${e?e:""} ${e?`${e>1?"hours":"hour"}`:""} ${n?n:""} ${n?`${n>1?"mins":"min"}`:""}`}getActionLabelHTML(t){const n={display:"inline-flex",alignItems:"center",gap:"0.5rem"};const a={color:"var(--nylas-error)"};switch(t){case"preview":return e("span",{style:n},e("eye-icon",{width:"16",height:"16"}),c.t("nylasListConfigurations.previewButtonText"));case"copy":return e("span",{style:n},e("copy-icon",{width:"16",height:"16"}),c.t("nylasListConfigurations.copyLinkButtonText"));case"delete":return e("span",{style:{...n,...a}},e("delete-icon",{width:"15",height:"17"}),c.t("nylasListConfigurations.deleteButtonText"));default:return""}}previousPageClickedHandler(){if(this.previousCursors.length===0)return;this.currentCursor=this.previousCursors.pop()||null;const t=this.previousCursors[this.previousCursors.length-1]||undefined;this.initListConfigurations.emit({host:this.host,cursor:t})}nextPageClickedHandler(){if(!this.currentCursor)return;this.previousCursors=[...this.previousCursors,this.currentCursor];this.initListConfigurations.emit({host:this.host,cursor:this.currentCursor})}render(){return e(i,null,e("div",{class:"header"},e("div",{class:"description"},e("h2",null,c.t("allSchedulingPages")),e("p",null,c.t("createAndManageSchedulingPages"))),this.configurations&&this.configurations.length>0&&e("div",{class:"actions"},e("button-component",{part:"nlc__create-new-cta",clickHandler:()=>{this.createButtonClick.emit(this.host)}},c.t("createNewSchedulingPageButtonText")))),e("div",{class:"configurations"},e("div",{class:"table-container"},e("table",{class:{"no-configurations":this.state!=="loading"&&(!this.configurations||this.configurations.length===0)}},e("tr",{class:{hide:this.state==="loading"||this.configurations&&this.configurations.length===0}},e("th",null,c.t("pageTitle")),e("th",null,c.t("durationTitle")),e("th",null)),this.state==="loading"&&e("tr",{class:"no-configurations"},e("td",{colSpan:3},e("div",null,e("h3",null,c.t("loading"),"..."),e("p",null,c.t("loadingPagesDescription"))))),this.state!=="loading"&&(!this.configurations||this.configurations.length===0)&&e("tr",{class:"no-configurations"},e("td",{colSpan:3},e("div",null,e("calendar-icon",{width:"48",height:"48"}),e("h3",null,c.t("noSchedulingPages")),e("p",null,c.t("createFirstSchedulingPage")),e("button-component",{part:"nlc__create-new-cta",clickHandler:()=>{this.createButtonClick.emit(this.host)}},c.t("createNewSchedulingPageButtonText"))))),this.state!=="loading"&&this.configurations?.map(((t,n)=>{const a=n===this.configurations.length-1||n===this.configurations.length-2;return e("tr",{key:t?.id},e("td",null,e("div",{class:"title"},e("div",{class:"config-event-title",title:t?.event_booking?.title},t?.event_booking?.title),e("div",{class:"config-event-description"},t?.event_booking?.description))),e("td",null,e("div",{class:"duration"},this.getDurationString(t?.availability?.duration_minutes))),e("td",null,e("div",{class:"actions"},e("button-component",{variant:"basic",key:`edit-${n}`,clickHandler:e=>{e.preventDefault();this.editButtonClick.emit({host:this.host,configuration:t})}},e("edit-icon",{width:"16",height:"16"}),c.t("editSchedulingPageButtonText")),e("select-dropdown",{class:{last:a},name:"actions",options:[{value:`preview-${n}`,label:"Preview",labelHTML:this.getActionLabelHTML("preview")},{value:`copy-${n}`,label:"Copy link",labelHTML:this.getActionLabelHTML("copy")},{value:`delete-${n}`,label:"Delete",labelHTML:this.getActionLabelHTML("delete")}],defaultSelectedOption:{value:"",label:""},dropdownButtonText:"...",withSearch:false,withChevron:false,exportparts:"sd_dropdown: actions__dropdown, sd_dropdown-button: actions__dropdown-button, sd_dropdown-content: actions__dropdown-content"}))))})))),e("div",{class:"pagination"},e("button",{class:"arrow left",onClick:()=>this.previousPageClickedHandler(),disabled:this.previousCursors.length<=0},e("chevron-icon",null)),e("button",{class:"arrow right",onClick:()=>this.nextPageClickedHandler(),disabled:this.disableNextPageButton},e("chevron-icon",null)))),this.state==="error"&&e("div",{class:"error-container"},e("p",{class:"error"},this.error)),!!this.deleteConfigurationId&&e("div",{class:"card-wrapper"},e("div",{class:"card-modal"},e("div",{class:"close-button"},e("button-component",{tooltip:"Close",id:"close",variant:"invisible",onClick:t=>this.closeModal(t),part:"nfbf__close-button"},e("close-icon",null))),e("div",{class:"header"},e("h2",{slot:"card-title",part:"nfbf__title"},c.t("deleteSchedulingPageTitle"))),e("div",{class:"description title-desc"},e("p",null,c.t("deleteSchedulingPageDescription"))),e("div",{class:{footer:true}},e("button-component",{variant:"basic",onClick:t=>this.closeModal(t),part:"nfbf__button-outline nfbf__cancel-cta"},`${c.t("deleteSchedulingPageCancelButton")}`),e("button-component",{variant:"destructive",onClick:t=>this.handleConfirmDeleteButtonClicked(t),disabled:this.showDeleteButtonLoading,isLoading:this.showDeleteButtonLoading,part:"nfbf__button-outline nfbf__reschedule-cta"},`${c.t("deleteSchedulingPageConfirmButton")}`)))))}get host(){return s(this)}static get watchers(){return{listConfigurationsNextCursor:["listConfigurationsNextCursorChangedHandler"],selectedLanguage:["selectedLanguageChangedHandler"]}}};j([o({name:"nylas-list-configurations",stateToProps:new Map([["schedulerConfig.configurations","configurations"],["schedulerConfig.listConfigurationsNextCursor","listConfigurationsNextCursor"],["schedulerConfig.selectedLanguage","selectedLanguage"]]),localPropsToProp:new Map([["schedulerPreviewLink","schedulerPreviewLink"]]),eventToProps:{initListConfigurations:async(t,e)=>{const{host:n,cursor:a}=t.detail;await n.setState("loading");const[i,s]=await e.schedulerConfig.getConfigurations(a);if(!i&&s&&s.message){await n.setState("error");await n.setError(s.message);return}await n.setState("loaded")},createButtonClick:async(t,e)=>{e.schedulerConfigStore.resetSelectedConfiguration();e.schedulerConfigStore.state.action="create"},deleteButtonClick:async(t,e)=>{const{host:n,configuration:a}=t.detail;const[i,s]=await e.schedulerConfig.deleteConfiguration(a.id);if(!i&&s&&s.message){await n.setState("error");await n.setError(s.message)}await n.hideDeleteConfirmation()},editButtonClick:async(t,e)=>{const{configuration:n}=t.detail;e.schedulerConfigStore.state.selectedConfiguration=n;e.schedulerConfigStore.state.action="edit"}},fireRegisterEvent:true}),F("design:type",Function),F("design:paramtypes",[]),F("design:returntype",void 0)],O.prototype,"render",null);O.style=P;export{_ as google_logo_icon,x as microsoft_logo_icon,B as nylas_editor_tabs,O as nylas_list_configurations};
//# sourceMappingURL=p-0bc18e91.entry.js.map