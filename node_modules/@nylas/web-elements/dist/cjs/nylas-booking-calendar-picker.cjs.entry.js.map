{"file":"nylas-booking-calendar-picker.entry.cjs.js","mappings":"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","names":["debug","i18next","h","Host","RegisterComponent"],"sources":["src/components/scheduler-editor/nylas-booking-calendar-picker/nylas-booking-calendar-picker.scss?tag=nylas-booking-calendar-picker&encapsulation=shadow","src/components/scheduler-editor/nylas-booking-calendar-picker/nylas-booking-calendar-picker.tsx"],"sourcesContent":["@import '../../../common/styles/variables.scss';\n\n:host {\n  display: block;\n  @include default-css-variables;\n  width: inherit;\n}\n\n.nylas-booking-calendar-picker {\n  width: inherit;\n  display: flex;\n  flex-direction: column;\n  margin: 1rem;\n  border-radius: var(--nylas-border-radius-2x);\n  border: 1px solid var(--nylas-base-200);\n\n  .header {\n    padding: 1rem;\n    border-bottom: 1px solid var(--nylas-base-200);\n\n    h3 {\n      margin: 0;\n      font-size: 16px;\n      font-weight: 600;\n      line-height: 20px;\n      color: var(--nylas-base-900);\n      text-align: left;\n    }\n\n    p {\n      margin: 0.25rem 0 0 0;\n      font-size: 0.875rem;\n      font-weight: 400;\n      line-height: 20px;\n      color: var(--nylas-base-600);\n      text-align: left;\n      display: flex;\n      align-items: center;\n      gap: 4px;\n    }\n  }\n\n  .nylas-booking-calendar-picker__loading {\n    padding-bottom: 1rem;\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n\n    .label {\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n      margin: 1rem 1rem 0;\n      color: var(--nylas-base-800);\n    }\n\n    .loading-button {\n      margin: 0 1rem;\n      padding: 0;\n      width: inherit;\n      height: 48px;\n      color: black;\n      font-size: 16px;\n      cursor: not-allowed;\n      display: flex;\n      gap: 0.5rem;\n      justify-content: space-between;\n      align-items: center;\n      background: transparent;\n      border: 1px solid var(--nylas-base-200);\n      border-radius: var(--nylas-border-radius-2x);\n\n      span {\n        padding: 0 1rem;\n      }\n    }\n  }\n\n  .nylas-booking-calendar-picker__dropdown {\n    padding: 1rem;\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n\n    span.label {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      color: var(--nylas-base-800);\n\n      tooltip-component {\n        display: flex;\n      }\n    }\n\n    select-dropdown::part(sd_dropdown) {\n      width: 100%;\n    }\n\n    select-dropdown::part(sd_dropdown-content) {\n      width: 100%;\n      max-width: unset;\n    }\n\n    select-dropdown::part(sd_dropdown-button) {\n      width: 100%;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      border: 1px solid var(--nylas-base-200);\n      border-radius: var(--nylas-border-radius-2x);\n    }\n\n    select-dropdown::part(sd_dropdown-button-selected-label) {\n      max-width: calc(100% - 2rem);\n      font-family: var(--nylas-font-family);\n      font-size: 16px;\n      line-height: 24px;\n    }\n  }\n}\n","import { RegisterComponent } from '@/common/register-component';\nimport { NylasSchedulerConfigConnector } from '@/connector/nylas-scheduler-config-connector';\nimport { debug } from '@/utils/utils';\nimport { Calendar } from '@nylas/core';\nimport { AttachInternals, Component, Element, Event, EventEmitter, Host, Listen, Prop, State, Watch, h } from '@stencil/core';\nimport { NylasSchedulerEditor } from '../nylas-scheduler-editor/nylas-scheduler-editor';\nimport { User } from '@/common/nylas-api-request';\nimport i18next from '@/utils/i18n';\nimport { LANGUAGE_CODE } from '@/common/constants';\n\n/**\n * The `nylas-booking-calendar-picker` component is a UI component that displays the booking calendar picker.\n * @part nbcp - The booking calendar picker container\n * @part nbcp__header - The header of the booking calendar picker\n * @part nbcp__input-label - The input label of the booking calendar picker\n * @part nbcp__dropdown - The dropdown container\n * @part nbcp__dropdown-button - The dropdown button\n * @part nbcp__dropdown-content - The dropdown content\n */\n@Component({\n  tag: 'nylas-booking-calendar-picker',\n  styleUrl: 'nylas-booking-calendar-picker.scss',\n  shadow: true,\n  formAssociated: true,\n})\nexport class NylasBookingCalendarPicker {\n  @Element() host!: HTMLNylasCalendarPickerElement;\n  /**\n   * @standalone\n   * The calendars to choose from.\n   */\n  @Prop() calendars?: Calendar[];\n  /**\n   * @standalone\n   * The current logged in user.\n   */\n  @Prop() currentUser?: User;\n  /**\n   * @standalone\n   * The list of user's calendars.\n   */\n  @Prop() currentUserCalendars?: Calendar[];\n  /**\n   * @standalone\n   * The name of the calendar picker.\n   */\n  @Prop() name: string = 'booking-calendar';\n  /**\n   * @standalone\n   * The default selected calendar.\n   */\n  @Prop() defaultBookingCalendar: string = '';\n  /**\n   * The prop to hide the header.\n   */\n  @Prop() hideHeader: boolean = false;\n  /**\n   * Prop for express flow when creating a config\n   */\n  @Prop() expressFlow: boolean = false;\n  /**\n   * The selected language.\n   */\n  @Prop() selectedLanguage?: LANGUAGE_CODE;\n  /**\n   * The element internals.\n   */\n  @AttachInternals() internals!: ElementInternals;\n\n  /**\n   * The selected calendars.\n   */\n  @State() selectedCalendar: string = '';\n\n  /**\n   * This event is fired when the selected booking calendar changes.\n   */\n  @Event() valueChanged!: EventEmitter<{\n    value: string;\n    name: string;\n    valueChanged?: (event: CustomEvent<{ value: string; name: string }>) => void;\n  }>;\n\n  // Lifecycle methods\n  connectedCallback() {\n    debug('nylas-booking-calendar-picker', 'connectedCallback');\n  }\n\n  disconnectedCallback() {\n    debug('nylas-booking-calendar-picker', 'disconnectedCallback');\n  }\n\n  componentWillLoad() {\n    debug('nylas-booking-calendar-picker', 'componentWillLoad');\n    // See comment in the @Watch('name') decorator for more information.\n    this.host.setAttribute('name', this.name);\n  }\n\n  componentDidLoad() {\n    debug('nylas-booking-calendar-picker', 'componentDidLoad');\n    const primaryCalendar = this.calendars?.find(calendar => calendar.is_primary)?.id;\n    const firstCalendar = this.calendars?.[0]?.id;\n    this.defaultBookingCalendar = this.defaultBookingCalendar || primaryCalendar || firstCalendar || '';\n    this.isInternalsAvailable && this.internals.setFormValue(this.defaultBookingCalendar.toString(), this.name);\n    this.selectedCalendar = this.defaultBookingCalendar;\n  }\n\n  componentWillUpdate() {\n    debug('nylas-booking-calendar-picker', 'componentWillUpdate');\n  }\n\n  componentDidUpdate() {\n    debug('nylas-booking-calendar-picker', 'componentDidUpdate');\n  }\n\n  componentWillRender() {\n    debug('nylas-booking-calendar-picker', 'componentWillRender');\n  }\n\n  componentDidRender() {\n    debug('nylas-booking-calendar-picker', 'componentDidRender');\n  }\n\n  get isInternalsAvailable() {\n    return this.internals !== undefined && typeof this.internals.setFormValue === 'function';\n  }\n\n  /**\n   * When a name prop is passed, stencil does not automatically set the name attribute on the host element.\n   * Since this component is form-associated, the name attribute is required for form submission.\n   * This is a workaround to ensure that the name attribute is set on the host element.\n   */\n  @Watch('name')\n  elementNameChangedHandler(newValue: string) {\n    debug('nylas-booking-calendar-picker', 'elementNameChangedHandler', newValue);\n    this.host.setAttribute('name', newValue);\n  }\n\n  @Watch('currentUserCalendars')\n  currentUserCalendarsChangedHandler(newValue: Calendar[]) {\n    debug('nylas-booking-calendar-picker', 'currentUserCalendarsChangedHandler', newValue);\n    this.currentUserCalendars = newValue;\n  }\n\n  @Watch('selectedLanguage')\n  selectedLanguageChangedHandler(newVal: LANGUAGE_CODE, oldVal: LANGUAGE_CODE) {\n    if (newVal === oldVal) return;\n    i18next.changeLanguage(newVal);\n  }\n\n  @Listen('nylasFormDropdownChanged')\n  nylasFormDropdownChangedHandler(event: CustomEvent<{ value: string; name: string }>) {\n    debug('nylas-booking-calendar-picker', 'nylasFormDropdownChangedHandler', event.detail);\n    // Pass as handler so that if event.defaultPrevented by parent app, this will be skipped.\n    this.isInternalsAvailable && this.internals.setValidity({});\n    const valueChanged = (event: CustomEvent<{ value: string; name: string }>) => {\n      const { value } = event.detail;\n      this.selectedCalendar = value;\n      this.isInternalsAvailable && this.internals.setFormValue(value.toString(), this.name);\n    };\n    this.valueChanged.emit({ value: event.detail.value, name: this.name, valueChanged });\n  }\n\n  @RegisterComponent<NylasBookingCalendarPicker, NylasSchedulerConfigConnector, Exclude<NylasSchedulerEditor['stores'], undefined>>({\n    name: 'nylas-booking-calendar-picker',\n    stateToProps: new Map([\n      ['schedulerConfig.calendars', 'currentUserCalendars'],\n      ['schedulerConfig.currentUser', 'currentUser'],\n      ['schedulerConfig.selectedLanguage', 'selectedLanguage'],\n    ]),\n    eventToProps: {\n      valueChanged: async (\n        event: CustomEvent<{ value: string; name: string; valueChanged?: (event: CustomEvent<{ value: string; name: string }>) => void }>,\n        _nylasSchedulerConfigConnector: NylasSchedulerConfigConnector,\n      ) => {\n        const { valueChanged } = event.detail;\n        // If a handler is passed, call it.\n        if (valueChanged) {\n          valueChanged(event);\n        }\n      },\n    },\n    fireRegisterEvent: true,\n  })\n  render() {\n    const currentUserCalendarOptions =\n      this.currentUserCalendars?.map(calendar => {\n        return {\n          value: calendar.id,\n          label: calendar.name,\n        };\n      }) ?? [];\n\n    const optionsFromCalendars =\n      this.calendars?.map(calendar => {\n        return {\n          value: calendar.id,\n          label: calendar.name,\n        };\n      }) ?? [];\n    const calendarOptions = optionsFromCalendars?.length > 0 ? optionsFromCalendars : currentUserCalendarOptions || [];\n    const defaultOption = calendarOptions.find(cal => cal.value == this.defaultBookingCalendar);\n    return (\n      <Host>\n        <div class=\"nylas-booking-calendar-picker\" part=\"nbcp\">\n          {!this.hideHeader && (\n            <div class=\"header\" part=\"nbcp__header\">\n              <h3>{i18next.t('nylasBookingCalendarPicker.headerTitle')}</h3>\n              <p>\n                {i18next.t('nylasBookingCalendarPicker.headerSubTitle')}\n                <tooltip-component>\n                  <info-icon slot=\"tooltip-icon\" />\n                  <span slot=\"tooltip-content\">{i18next.t('nylasBookingCalendarPicker.tooltip.desc')}</span>\n                </tooltip-component>\n              </p>\n            </div>\n          )}\n          {calendarOptions.length > 0 ? (\n            <div class=\"nylas-booking-calendar-picker__dropdown\">\n              <select-dropdown\n                name=\"booking-calendar\"\n                options={[{ value: '', label: i18next.t('nylasBookingCalendarPicker.selectOptionLabel') }, ...calendarOptions]}\n                withSearch={false}\n                required={this.expressFlow}\n                emptyValue={i18next.t('nylasBookingCalendarPicker.selectOptionLabel')}\n                errorMessage={i18next.t('nylasBookingCalendarPicker.selectCalendarErrorMessage')}\n                exportparts=\"sd_dropdown: nbcp__dropdown, sd_dropdown-button: nbcp__dropdown-button, sd_dropdown-content: nbcp__dropdown-content\"\n                defaultSelectedOption={defaultOption ? defaultOption : null}\n              />\n            </div>\n          ) : (\n            <div class=\"nylas-booking-calendar-picker__loading\">\n              <span class=\"label\">\n                {i18next.t('nylasBookingCalendarPicker.tooltip.desc')} <info-icon />\n              </span>\n              <div class=\"loading-button\">\n                <span>{i18next.t('loading')}...</span>\n              </div>\n            </div>\n          )}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"version":3}